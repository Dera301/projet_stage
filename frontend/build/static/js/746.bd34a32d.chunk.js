"use strict";(self.webpackChunkcolocation_antananarivo=self.webpackChunkcolocation_antananarivo||[]).push([[746],{589:(e,t,n)=>{n.d(t,{A:()=>l,R:()=>i});var a=n(5043),r=n(9741),s=n(3216);const i=()=>{const{user:e}=(0,r.A)(),t=(0,s.Zp)(),[n,i]=(0,a.useState)(!1),l=(null===e||void 0===e?void 0:e.cinVerified)||(null===e||void 0===e?void 0:e.cin_verified)||!1,o=(null===e||void 0===e?void 0:e.cinPending)||!(null===e||void 0===e||!e.cin_verification_requested_at),c="owner"===(null===e||void 0===e?void 0:e.userType)&&!l&&!o,d=(0,a.useCallback)(n=>(n&&n.preventDefault(),e?!c||(i(!0),!1):(t("/login",{state:{from:window.location.pathname}}),!1)),[c,e,t]);return{isVerified:l,isPending:o,requiresVerification:c,showVerificationModal:n,setShowVerificationModal:i,checkVerification:d,onClickHandler:(e,n)=>{d(e)&&t(n)}}},l=i},1602:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(3986),r=n(5043);const s=["title","titleId"];function i(e,t){let{title:n,titleId:i}=e,l=(0,a.A)(e,s);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const l=r.forwardRef(i)},2556:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(3986),r=n(5043);const s=["title","titleId"];function i(e,t){let{title:n,titleId:i}=e,l=(0,a.A)(e,s);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const l=r.forwardRef(i)},4111:(e,t,n)=>{n.d(t,{A:()=>l});n(5043);var a=n(2556),r=n(7591),s=n(5475),i=n(579);const l=e=>{let{isOpen:t,onClose:n,showBackButton:l=!0,backButtonText:o="Retour",onBackClick:c}=e;return t?(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative",children:[(0,i.jsx)("button",{onClick:()=>{n()},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,i.jsx)(r.A,{className:"h-6 w-6"})}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-yellow-100 mb-4",children:(0,i.jsx)(a.A,{className:"h-8 w-8 text-yellow-600"})}),(0,i.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"V\xe9rification Requise"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"Vous devez v\xe9rifier votre CIN avant de pouvoir acc\xe9der \xe0 cette fonctionnalit\xe9."}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsx)(s.N_,{to:"/cin-verification",onClick:n,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"V\xe9rifier mon CIN"}),l&&(0,i.jsx)("button",{type:"button",onClick:()=>{c&&c(),n()},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:o})]})]})]})}):null}},7449:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(3986),r=n(5043);const s=["title","titleId"];function i(e,t){let{title:n,titleId:i}=e,l=(0,a.A)(e,s);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const l=r.forwardRef(i)},7746:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(5043),r=n(4439),s=n(3216),i=n(5475),l=n(9741),o=n(8927),c=n(3063),d=n(7449),u=n(1602),m=n(8662),x=(n(2339),n(8378)),h=n(2227),f=n(589),v=n(4111),g=n(579);const b=()=>{const{announcements:e,loading:t}=(0,r.b)(),{user:n}=(0,l.A)(),b=(0,s.Zp)(),{sendMessage:p}=(0,o.J)(),[j,w]=(0,a.useState)(""),[y,N]=(0,a.useState)(1),[k,C]=(0,a.useState)(!1),[A,M]=(0,a.useState)(""),[V,L]=(0,a.useState)(null),{checkVerification:E,showVerificationModal:S,setShowVerificationModal:B}=(0,f.A)(),I=(0,a.useMemo)(()=>j?e.filter(e=>{var t,n,a,r,s;return(null===(t=e.content)||void 0===t?void 0:t.toLowerCase().includes(j.toLowerCase()))||(null===(n=e.author)||void 0===n||null===(a=n.firstName)||void 0===a?void 0:a.toLowerCase().includes(j.toLowerCase()))||(null===(r=e.author)||void 0===r||null===(s=r.lastName)||void 0===s?void 0:s.toLowerCase().includes(j.toLowerCase()))}):e,[e,j]),R=(0,a.useMemo)(()=>{const e=9*(y-1);return I.slice(e,e+9)},[I,y]),Z=Math.ceil(I.length/9);return(0,g.jsxs)("div",{className:"min-h-screen bg-gray-50 py-8",children:[(0,g.jsx)(v.A,{isOpen:S,onClose:()=>B(!1),backButtonText:"Retour aux annonces"}),(0,g.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,g.jsx)("div",{className:"mb-8",children:(0,g.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)(d.A,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),(0,g.jsx)("input",{type:"text",placeholder:"Rechercher une annonce par contenu ou nom d'auteur...",value:j,onChange:e=>{w(e.target.value),N(1)},className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500"})]})})}),(0,g.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Annonces des \xe9tudiants"}),(0,g.jsx)("p",{className:"text-gray-600",children:"Recherches de colocation publi\xe9es par les \xe9tudiants"})]}),"student"===(null===n||void 0===n?void 0:n.userType)&&(0,g.jsxs)("button",{onClick:e=>{e.preventDefault(),E(e)&&b("/create-announcement")},className:"btn-primary flex items-center space-x-2",children:[(0,g.jsx)(m.A,{className:"w-4 h-4"}),(0,g.jsx)("span",{children:"Publier une annonce"})]})]}),t?(0,g.jsx)("div",{className:"flex items-center justify-center py-24",children:(0,g.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary-600"})}):0===I.length?(0,g.jsxs)("div",{className:"text-center py-24",children:[(0,g.jsx)(u.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:j?"Aucune annonce trouv\xe9e":"Aucune annonce pour le moment"}),(0,g.jsx)("p",{className:"text-gray-600 mb-4",children:j?"Essayez avec d'autres termes de recherche":"Soyez le premier \xe0 publier une annonce de colocation."}),"student"===(null===n||void 0===n?void 0:n.userType)&&!j&&(0,g.jsx)("button",{onClick:e=>{e.preventDefault(),E(e)&&b("/create-announcement")},className:"btn-primary",children:"Publier"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:R.map(e=>{var t,a,r;return(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden flex flex-col h-full",children:[e.images&&e.images.length>0?(0,g.jsx)("img",{src:(r=e.images[0],r?r.startsWith("http")?r:r.startsWith("/")?"http://localhost".concat(r):r:"/api/placeholder/400/300"),alt:"annonce",className:"w-full h-40 object-cover"}):(0,g.jsx)("div",{className:"h-40 bg-gray-100 flex items-center justify-center text-gray-400",children:(0,g.jsx)(u.A,{className:"w-12 h-12"})}),(0,g.jsxs)("div",{className:"p-4 flex flex-col flex-grow",children:[(0,g.jsxs)("div",{className:"flex-grow",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,g.jsx)("div",{className:"font-semibold text-gray-900 truncate",children:e.author?"".concat(e.author.firstName," ").concat(e.author.lastName):"Utilisateur inconnu"}),(0,g.jsx)("div",{className:"text-xs text-gray-500",children:(0,x.m)(new Date(e.createdAt),{addSuffix:!0,locale:h.fr})})]}),(0,g.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3 mb-3",children:e.content})]}),(0,g.jsx)("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-gray-100",children:(0,g.jsxs)("div",{className:"flex gap-2 flex-1",children:[(0,g.jsx)(i.N_,{to:"/announcements/".concat(e.id),className:"btn-secondary flex-1 text-center",children:"Voir d\xe9tails"}),n&&Number(null===(t=e.author)||void 0===t?void 0:t.id)===Number(n.id)&&(0,g.jsx)("button",{onClick:()=>b("/edit-announcement/".concat(e.id)),className:"btn-primary flex items-center justify-center space-x-2 flex-1",title:"Modifier mon annonce",children:(0,g.jsx)("span",{children:"Modifier"})}),n&&Number(null===(a=e.author)||void 0===a?void 0:a.id)!==Number(n.id)&&(0,g.jsxs)("button",{onClick:t=>((e,t)=>{var a,r;e.preventDefault(),E(e)&&(n?n&&Number(null===(a=t.author)||void 0===a?void 0:a.id)===Number(n.id)||(L(t),C(!0),M("Bonjour ".concat((null===(r=t.author)||void 0===r?void 0:r.firstName)||"",", je suis int\xe9ress\xe9(e) par votre annonce de recherche de colocation."))):b("/login"))})(t,e),className:"btn-primary flex items-center justify-center space-x-2 flex-1",children:[(0,g.jsx)(c.A,{className:"w-4 h-4"}),(0,g.jsx)("span",{children:"Contacter"})]})]})})]})]},e.id)})}),Z>1&&(0,g.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,g.jsx)("button",{onClick:()=>N(e=>Math.max(e-1,1)),disabled:1===y,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Pr\xe9c\xe9dent"}),(0,g.jsxs)("span",{className:"text-gray-600",children:["Page ",y," sur ",Z]}),(0,g.jsx)("button",{onClick:()=>N(e=>Math.min(e+1,Z)),disabled:y===Z,className:"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Suivant"})]})]})]})]})}},8662:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(3986),r=n(5043);const s=["title","titleId"];function i(e,t){let{title:n,titleId:i}=e,l=(0,a.A)(e,s);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),n?r.createElement("title",{id:i},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const l=r.forwardRef(i)}}]);
//# sourceMappingURL=746.bd34a32d.chunk.js.map