{"version":3,"file":"static/js/411.55c5aac8.chunk.js","mappings":"2PACA,SAASA,EAAsBC,EAI5BC,GAAQ,IAJqB,MAC9BC,EAAK,QACLC,GAEDH,EADII,GAAKC,EAAAA,EAAAA,GAAAL,EAAAM,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3DC,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTC,YAAa,IACbC,OAAQ,eACR,cAAe,OACf,YAAa,OACbC,IAAKd,EACL,kBAAmBE,GAClBC,GAAQF,EAAqBK,EAAAA,cAAoB,QAAS,CAC3DS,GAAIb,GACHD,GAAS,KAAmBK,EAAAA,cAAoB,OAAQ,CACzDU,cAAe,QACfC,eAAgB,QAChBC,EAAG,oJAEP,CACA,MACA,EADiCZ,EAAAA,WAAiBR,G,kFCvBlD,SAASqB,EAASpB,EAIfC,GAAQ,IAJQ,MACjBC,EAAK,QACLC,GAEDH,EADII,GAAKC,EAAAA,EAAAA,GAAAL,EAAAM,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3DC,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTC,YAAa,IACbC,OAAQ,eACR,cAAe,OACf,YAAa,OACbC,IAAKd,EACL,kBAAmBE,GAClBC,GAAQF,EAAqBK,EAAAA,cAAoB,QAAS,CAC3DS,GAAIb,GACHD,GAAS,KAAmBK,EAAAA,cAAoB,OAAQ,CACzDU,cAAe,QACfC,eAAgB,QAChBC,EAAG,kaAEP,CACA,MACA,EADiCZ,EAAAA,WAAiBa,G,2CCLlD,MAugBA,EAvgB+BC,KAAO,IAADC,EAAAC,EACnC,MAAM,cACJC,EAAa,YACbC,EAAW,WACXC,EAAU,wBACVC,EAAuB,QACvBC,EAAO,YACPC,EAAW,cACXC,EAAa,mBACbC,IACEC,EAAAA,EAAAA,MACE,KAAEC,IAASC,EAAAA,EAAAA,KACXC,GAAWC,EAAAA,EAAAA,OACVC,EAAsBC,IAA2BC,EAAAA,EAAAA,UAAwB,OACzEC,EAAYC,IAAiBF,EAAAA,EAAAA,UAAS,KACtCG,EAAsBC,IAA2BJ,EAAAA,EAAAA,UAAoB,KACrEK,EAAWC,IAAgBN,EAAAA,EAAAA,WAAS,IACpCO,EAAmBC,IAAwBR,EAAAA,EAAAA,UAAsB,IAAIS,MACrEC,EAAuBC,IAA4BX,EAAAA,EAAAA,WAAS,GAC7DY,GAAiBC,EAAAA,EAAAA,QAAuB,OACvCC,EAAYC,IAAiBf,EAAAA,EAAAA,UAAwB,OACrDgB,EAAqBC,IAA0BjB,EAAAA,EAAAA,UAAsB,IAAIS,MACzES,EAAcC,IAAmBnB,EAAAA,EAAAA,WAAS,GAE3CoB,EAAsBnC,EAAcoC,KAAKC,GAAKA,EAAE7C,KAAOqB,GAGvDyB,GAA2BC,EAAAA,EAAAA,aAAYC,UAC3C,IAAKrC,EAAyB,OAC9B,MAAMsC,QAAiBtC,EAAwBuC,GAC/CvB,EAAwBsB,IACvB,CAACtC,KAEJwC,EAAAA,EAAAA,WAAU,KACJ9B,GACFyB,EAAyBzB,IAE1B,CAACA,EAAsByB,KAG1BK,EAAAA,EAAAA,WAAU,KAAO,IAADC,EACQ,QAAtBA,EAAAjB,EAAekB,eAAO,IAAAD,GAAtBA,EAAwBE,eAAe,CAAEC,SAAU,YAClD,CAAC7B,KAGJyB,EAAAA,EAAAA,WAAU,KACR,GAAI9B,GAAwBJ,GAAQP,EAAY,CAC9C,MAAM8C,EAAiB9B,EAAqB+B,OAC1CC,GAAOA,EAAIC,aAAe1C,EAAKjB,KAAO0D,EAAIE,QAIxCJ,EAAeK,OAAS,GAC1B9B,EAAqB+B,GAAQ,IAAI9B,IAAI,IAAI8B,EAAMzC,KAKjDmC,EAAeO,QAAQf,UACrB,UACQtC,EAAWgD,EAAI1D,GACvB,CAAE,MAAOgE,GACPC,QAAQD,MAAM,4BAA6BA,EAC7C,GAEJ,GACC,CAAC3C,EAAsBK,EAAsBT,EAAMP,IAEtD,MAAMwD,EAAoBlB,UACxB,IAAKxB,EAAW2C,SAAWxB,IAAwB1B,GAAQW,EAAW,OAEtE,MAAMwC,EAAmBzB,EAAoB0B,aAAazB,KAAK0B,GAAKA,EAAEtE,KAAOiB,EAAKjB,IAClF,GAAKoE,EAAL,CAEAvC,GAAa,GACb,UACQpB,EAAY2D,EAAiBpE,GAAIwB,GACvCC,EAAc,IAEVJ,SACIyB,EAAyBzB,EAEnC,CAAE,MAAO2C,GACPC,QAAQD,MAAM,qCAAuCA,EACvD,CAAC,QACCnC,GAAa,EACf,CAd6B,IAgC/BsB,EAAAA,EAAAA,WAAU,OAEN3C,EAAcqD,OAAS,IACtBxC,GACAT,GACAqB,GACAQ,GAEDnB,EAAwBd,EAAc,GAAGR,KAE1C,CAACQ,EAAea,EAAsBT,EAASqB,EAAuBQ,KAGzEU,EAAAA,EAAAA,WAAU,KACR,MAAMoB,EAAS,IAAIC,gBAAgBrD,EAASsD,QACtCC,EAAWH,EAAOI,IAAI,MACtBC,EAAUL,EAAOI,IAAI,WAC3B,IAAKD,GAAqC,IAAzBlE,EAAcqD,OAAc,OAE7C,MAAMgB,EAASrE,EAAcoC,KAAKkC,GAAQA,EAAKT,aAAaU,KAAKT,GAAKU,OAAOV,EAAEtE,MAAQgF,OAAON,KAC1FG,IACFvD,EAAwBuD,EAAO7E,IAC3B4E,GAASnD,EAAcmD,KAE5B,CAACzD,EAASsD,OAAQjE,KAGrB2C,EAAAA,EAAAA,WAAU,KACJ9B,GACFa,GAAyB,IAE1B,CAACb,KAGJ8B,EAAAA,EAAAA,WAAU,KACR,IAAKlC,EAAM,OACX,MAAMgE,EAAG,wBAAAC,OAA2BjE,EAAKjB,IACzC,IACE,MAAMmF,EAAMC,aAAaC,QAAQJ,GAC7BE,GAAK3C,EAAuB,IAAIR,IAAYsD,KAAKC,MAAMJ,IAC7D,CAAE,MAAAK,GAAO,GACR,CAACvE,KAEJkC,EAAAA,EAAAA,WAAU,KACR,MAAMsC,EAAeA,KACnB/C,EAAgBgD,OAAOC,WAAa,OAKtC,OAFAF,IACAC,OAAOE,iBAAiB,SAAUH,GAC3B,IAAMC,OAAOG,oBAAoB,SAAUJ,IACjD,IAEH,MAMMK,EAAyB5C,IAC7BV,EAAuBsB,IACrB,MAAMiC,EAAO,IAAI/D,IAAI8B,GAGrB,OAFAiC,EAAKC,IAAI9C,GATuB6C,KAClC,IAAK9E,EAAM,OACX,MAAMgE,EAAG,wBAAAC,OAA2BjE,EAAKjB,IACzC,IAAMoF,aAAaa,QAAQhB,EAAKK,KAAKY,UAAUC,MAAMC,KAAKL,IAAS,CAAE,MAAAM,GAAO,GAO1EC,CAA2BP,GACpBA,IAEL1E,IAAyB6B,GAC3B5B,EAAwB,MAE1BgB,EAAc,QAIhBa,EAAAA,EAAAA,WAAU,KACR,MAAMoD,EAAaA,IAAMjE,EAAc,MAEvC,OADAkE,SAASZ,iBAAiB,QAASW,GAC5B,IAAMC,SAASX,oBAAoB,QAASU,IAClD,IAGH,MAwBME,GAAwBhE,IAAiBpB,EACzCqF,GAAyBjE,KAAkBpB,EAC3CsF,EAAwC,OAAnBhE,QAAmB,IAAnBA,OAAmB,EAAnBA,EAAqB0B,aAAazB,KAAK0B,GAAKA,EAAEtE,MAAW,OAAJiB,QAAI,IAAJA,OAAI,EAAJA,EAAMjB,KAEtF,OAAKiB,GASH2F,EAAAA,EAAAA,KAAA,OAAKC,UAAU,+BAA8BC,UAC3CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yCAAwCC,SAAA,EAErDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,OAAMC,SAAA,EACnBF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,wCAAuCC,SAAC,cAGtDF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,gBAAeC,SAAC,kEAK/BF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uEAAsEC,UACnFC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gEAA+DC,SAAA,EAE5EC,EAAAA,EAAAA,MAAA,OACEF,UAAS,GAAA3B,OAAKuB,EAAuB,OAAS,SAAQ,gEAA+DK,SAAA,EAErHF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,+BAA8BC,UAC3CF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sCAAqCC,SAAC,qBAGtDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yBAAwBC,SACpClG,GACCgG,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0CAAyCC,UACtDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sEAEsD,IAArErG,EAAciD,OAAOZ,IAAMN,EAAoByE,IAAInE,EAAE7C,KAAK6D,QAC5DkD,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iEAAgEC,SAAA,EAC7EF,EAAAA,EAAAA,KAACK,EAAAA,EAAQ,CAACJ,UAAU,oBACpBD,EAAAA,EAAAA,KAAA,KAAGC,UAAU,cAAaC,SAAC,yBAC3BF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,2BAA0BC,SAAC,+DAG1CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,SACvBtG,EAAciD,OAAOZ,IAAMN,EAAoByE,IAAInE,EAAE7C,KAAKkH,IAAKC,IAC9D,MAAM/C,EAAmB+C,EAAa9C,aAAazB,KAAK0B,GAAKA,EAAEtE,KAAOiB,EAAKjB,IAC3E,IAAKoE,EAAkB,OAAO,KAE9B,MAAMgD,EA5EKD,KAI/B,GAHmB9F,IAAyB8F,EAAanH,GAGzC,OAAO,EAGvB,GAAI8B,EAAkBkF,IAAIG,EAAanH,IAAK,OAAO,EAGnD,MAAMqH,EAAUF,EAAaG,YAC7B,IAAKD,EAAS,OAAO,EAErB,MAAME,EAAcvC,OAAOqC,EAAQG,YAAcxC,OAAW,OAAJ/D,QAAI,IAAJA,OAAI,EAAJA,EAAMjB,IACxDyH,GAAYJ,EAAQzD,OAE1B,OAAO2D,GAAeE,EAAW,EAAI,GA4DUC,CAAsBP,GAEjD,OACEP,EAAAA,EAAAA,KAAA,UAEEe,QAASA,KACPrG,EAAwB6F,EAAanH,IACrCsC,EAAc,MACdJ,GAAyB,IAE3B2E,UAAS,2DAAA3B,OACP7D,IAAyB8F,EAAanH,GAClC,8CACA,IACH8G,UAEHC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yEAAwEC,UACrFC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,uCAAsCC,SAAA,CACnD1C,EAAiBwD,UAAU,GAAIxD,EAAiByD,SAAS,SAG9Dd,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCC,SAAA,EAChDC,EAAAA,EAAAA,MAAA,MAAIF,UAAU,6CAA4CC,SAAA,CACvD1C,EAAiBwD,UAAU,IAAExD,EAAiByD,aAEjDd,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA8Bc,QAAUG,GAAMA,EAAEC,kBAAkBjB,SAAA,CAC9EM,EAAqB,IACpBR,EAAAA,EAAAA,KAAA,QAAMC,UAAU,sFAAqFC,SAClGM,KAGLL,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,UACEC,UAAU,kEACV3H,MAAM,UACNyI,QAAUG,IAAQA,EAAEC,kBAAmBzF,EAAcwB,GAAQA,IAASqD,EAAanH,GAAK,KAAOmH,EAAanH,KAAO8G,UAEnHF,EAAAA,EAAAA,KAAC7H,EAAsB,CAAC8H,UAAU,cAEnCxE,IAAe8E,EAAanH,KAC3B4G,EAAAA,EAAAA,KAAA,OAAKC,UAAU,4EAA2EC,UACxFF,EAAAA,EAAAA,KAAA,UACEC,UAAU,2EACVc,QAASA,IAAM7B,EAAsBqB,EAAanH,IAAI8G,SACvD,kCAQVK,EAAaG,cACZV,EAAAA,EAAAA,KAAA,KAAGC,UAAS,oBAAA3B,OACVkC,EAAqB,EAAI,4BAA8B,iBACtDN,SACAK,EAAaG,YAAYU,WAG9BpB,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBAAuBC,SACjCK,EAAaG,cAAeW,EAAAA,EAAAA,GAC3B,IAAIC,KAAKf,EAAaG,YAAYa,WAClC,CAAEC,WAAW,EAAMC,OAAQC,EAAAA,cA5D9BnB,EAAanH,cA0EhC4G,EAAAA,EAAAA,KAAA,OACEC,UAAS,GAAA3B,OAAKwB,EAAwB,OAAS,SAAQ,+BAA8BI,SAEpFnE,GACCoE,EAAAA,EAAAA,MAAAwB,EAAAA,SAAA,CAAAzB,SAAA,EAEEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0EAAyEC,SAAA,EACtFC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,CACzCrE,IACCmE,EAAAA,EAAAA,KAAA,UACEe,QAjJCa,KACvBlH,EAAwB,MACxBY,GAAyB,IAgJH2E,UAAU,4EACV3H,MAAM,2BAA0B4H,UAEhCF,EAAAA,EAAAA,KAAC6B,EAAAA,EAAa,CAAC5B,UAAU,eAG7BD,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yEAAwEC,UACrFC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,uCAAsCC,SAAA,CACjC,OAAlBH,QAAkB,IAAlBA,GAA6B,QAAXrG,EAAlBqG,EAAoBiB,iBAAS,IAAAtH,OAAX,EAAlBA,EAAgC,GACd,OAAlBqG,QAAkB,IAAlBA,GAA4B,QAAVpG,EAAlBoG,EAAoBkB,gBAAQ,IAAAtH,OAAV,EAAlBA,EAA+B,SAGpCwG,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,MAAIF,UAAU,sCAAqCC,SAAA,CAC9B,OAAlBH,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBiB,UAAU,IAAoB,OAAlBjB,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBkB,aAEvDjB,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBAAuBC,SACA,aAAf,OAAlBH,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoB+B,UAAyB,cAAa,2BAIjE3B,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,UACEe,QAnRUgB,KAC9BrH,EAAwB,MACxBG,EAAc,IACdS,GAAyB,IAiRL2E,UAAU,yFACV3H,MAAM,yBAAwB4H,UAE9BF,EAAAA,EAAAA,KAACgC,EAAAA,EAAS,CAAC/B,UAAU,eAEvBD,EAAAA,EAAAA,KAAA,UACEe,QAAS3E,UACP,GAAK3B,GACDqE,OAAOmD,QAAQ,oEACjB,UAAY9H,EAAmBM,GAAuBC,EAAwB,KAAO,CAAE,MAAAwH,GAAO,GAGlGjC,UAAU,0CACV3H,MAAM,4BAA2B4H,SAClC,qBAOLF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uCAAsCC,SAClB,IAAhCpF,EAAqBmC,QACpBkD,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iEAAgEC,SAAA,EAC7EF,EAAAA,EAAAA,KAACK,EAAAA,EAAQ,CAACJ,UAAU,oBACpBD,EAAAA,EAAAA,KAAA,KAAAE,SAAG,2CACHF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,UAASC,SAAC,qCAGzBF,EAAAA,EAAAA,KAAA2B,EAAAA,SAAA,CAAAzB,SACGpF,EAAqBwF,IAAK6B,IACzB,MAAMC,EAAQhE,OAAO+D,EAAQvB,YAAcxC,OAAO/D,EAAKjB,IAEvD,OACE4G,EAAAA,EAAAA,KAAA,OAEEC,UAAS,QAAA3B,OAAU8D,EAAQ,cAAgB,gBAAe,SAAQlC,UAElEC,EAAAA,EAAAA,MAAA,OACEF,UAAS,+CAAA3B,OACP8D,EACI,4CACA,oEACHlC,SAAA,EAEHF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,sBAAqBC,SAAEiC,EAAQf,WAC5CjB,EAAAA,EAAAA,MAAA,OAAKF,UAAS,wDAAA3B,OACZ8D,EAAQ,mBAAqB,iBAC5BlC,SAAA,EACDF,EAAAA,EAAAA,KAAA,QAAAE,UAAOmB,EAAAA,EAAAA,GAAoB,IAAIC,KAAKa,EAAQZ,WAAY,CAAEC,WAAW,EAAMC,OAAQC,EAAAA,OAClFU,IACCpC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oBAAmBC,SAC/BiC,EAAQnF,QACPgD,EAAAA,EAAAA,KAACqC,EAAAA,EAAe,CAACpC,UAAU,aAE3BD,EAAAA,EAAAA,KAACsC,EAAAA,EAAS,CAACrC,UAAU,iBAK5BmC,IACCjC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0CAAyCC,SAAA,EACtDF,EAAAA,EAAAA,KAAA,UACEC,UAAU,sEACV3H,MAAM,sBACNyI,QAAS3E,UACP,MAAMmG,EAAUC,OAAO,uBAAwBL,EAAQf,SACvD,GAAgB,OAAZmB,GAAoBA,EAAQhF,QAAUgF,IAAYJ,EAAQf,QAC5D,UAAYnH,EAAYkI,EAAQ/I,GAAImJ,EAAU,CAAE,MAAAE,GAAO,GAEzDvC,UAEFF,EAAAA,EAAAA,KAAC0C,EAAAA,EAAU,CAACzC,UAAU,eAExBD,EAAAA,EAAAA,KAAA,UACEC,UAAU,mEACV3H,MAAM,uBACNyI,QAAS3E,UACP,GAAI0C,OAAOmD,QAAQ,0BACjB,UAAY/H,EAAciI,EAAQ/I,GAAK,CAAE,MAAAuJ,GAAO,GAElDzC,UAEFF,EAAAA,EAAAA,KAACxG,EAAS,CAACyG,UAAU,qBAhDxBkC,EAAQ/I,WA8DzB4G,EAAAA,EAAAA,KAAA,OAAKC,UAAU,wCAAuCC,UACpDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iBAAgBC,SAAA,EAC7BF,EAAAA,EAAAA,KAAA,YACE4C,MAAOhI,EACPiI,SAAW3B,GAAMrG,EAAcqG,EAAEjD,OAAO2E,OACxCE,WAlYE5B,IACR,UAAVA,EAAE7C,KAAoB6C,EAAE6B,WAC1B7B,EAAE8B,iBACF1F,MAgYkB2F,YAAY,yBACZC,KAAM,EACNjD,UAAU,iCACVkD,SAAUnI,KAEZgF,EAAAA,EAAAA,KAAA,UACEe,QAASzD,EACT6F,UAAWvI,EAAW2C,QAAUvC,EAChCiF,UAAU,0FAAyFC,SAElGlF,GACCgF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,+DAEfD,EAAAA,EAAAA,KAACoD,EAAAA,EAAiB,CAACnD,UAAU,uBAOvCD,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iEAAgEC,UAC7EC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,mBAAkBC,SAAA,EAC/BF,EAAAA,EAAAA,KAACK,EAAAA,EAAQ,CAACJ,UAAU,6CACpBD,EAAAA,EAAAA,KAAA,MAAIC,UAAU,yCAAwCC,SAC1B,IAAzBtG,EAAcqD,OAAe,sBAAwB,sCAExD+C,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBAAuBC,SACR,IAAzBtG,EAAcqD,OACX,0DACA,gFAnSpB+C,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gDAA+CC,UAC5DF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,wE,sFCzOvB,SAASyC,EAAUtK,EAIhBC,GAAQ,IAJS,MAClBC,EAAK,QACLC,GAEDH,EADII,GAAKC,EAAAA,EAAAA,GAAAL,EAAAM,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3DC,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTC,YAAa,IACbC,OAAQ,eACR,cAAe,OACf,YAAa,OACbC,IAAKd,EACL,kBAAmBE,GAClBC,GAAQF,EAAqBK,EAAAA,cAAoB,QAAS,CAC3DS,GAAIb,GACHD,GAAS,KAAmBK,EAAAA,cAAoB,OAAQ,CACzDU,cAAe,QACfC,eAAgB,QAChBC,EAAG,wKAEP,CACA,MACA,EADiCZ,EAAAA,WAAiB+J,E,sFCvBlD,SAASL,EAAejK,EAIrBC,GAAQ,IAJc,MACvBC,EAAK,QACLC,GAEDH,EADII,GAAKC,EAAAA,EAAAA,GAAAL,EAAAM,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3DC,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTC,YAAa,IACbC,OAAQ,eACR,cAAe,OACf,YAAa,OACbC,IAAKd,EACL,kBAAmBE,GAClBC,GAAQF,EAAqBK,EAAAA,cAAoB,QAAS,CAC3DS,GAAIb,GACHD,GAAS,KAAmBK,EAAAA,cAAoB,OAAQ,CACzDU,cAAe,QACfC,eAAgB,QAChBC,EAAG,mEAEP,CACA,MACA,EADiCZ,EAAAA,WAAiB0J,E,sFCvBlD,SAASR,EAAazJ,EAInBC,GAAQ,IAJY,MACrBC,EAAK,QACLC,GAEDH,EADII,GAAKC,EAAAA,EAAAA,GAAAL,EAAAM,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3DC,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTC,YAAa,IACbC,OAAQ,eACR,cAAe,OACf,YAAa,OACbC,IAAKd,EACL,kBAAmBE,GAClBC,GAAQF,EAAqBK,EAAAA,cAAoB,QAAS,CAC3DS,GAAIb,GACHD,GAAS,KAAmBK,EAAAA,cAAoB,OAAQ,CACzDU,cAAe,QACfC,eAAgB,QAChBC,EAAG,wCAEP,CACA,MACA,EADiCZ,EAAAA,WAAiBkJ,E,sFCvBlD,SAASuB,EAAiBhL,EAIvBC,GAAQ,IAJgB,MACzBC,EAAK,QACLC,GAEDH,EADII,GAAKC,EAAAA,EAAAA,GAAAL,EAAAM,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3DC,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTC,YAAa,IACbC,OAAQ,eACR,cAAe,OACf,YAAa,OACbC,IAAKd,EACL,kBAAmBE,GAClBC,GAAQF,EAAqBK,EAAAA,cAAoB,QAAS,CAC3DS,GAAIb,GACHD,GAAS,KAAmBK,EAAAA,cAAoB,OAAQ,CACzDU,cAAe,QACfC,eAAgB,QAChBC,EAAG,sGAEP,CACA,MACA,EADiCZ,EAAAA,WAAiByK,E,sFCvBlD,SAASd,EAASlK,EAIfC,GAAQ,IAJQ,MACjBC,EAAK,QACLC,GAEDH,EADII,GAAKC,EAAAA,EAAAA,GAAAL,EAAAM,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3DC,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTC,YAAa,IACbC,OAAQ,eACR,cAAe,OACf,YAAa,OACbC,IAAKd,EACL,kBAAmBE,GAClBC,GAAQF,EAAqBK,EAAAA,cAAoB,QAAS,CAC3DS,GAAIb,GACHD,GAAS,KAAmBK,EAAAA,cAAoB,OAAQ,CACzDU,cAAe,QACfC,eAAgB,QAChBC,EAAG,0BAEP,CACA,MACA,EADiCZ,EAAAA,WAAiB2J,E","sources":["../node_modules/@heroicons/react/24/outline/esm/EllipsisHorizontalIcon.js","../node_modules/@heroicons/react/24/outline/esm/TrashIcon.js","pages/MessagesPage.tsx","../node_modules/@heroicons/react/24/outline/esm/PencilIcon.js","../node_modules/@heroicons/react/24/outline/esm/CheckCircleIcon.js","../node_modules/@heroicons/react/24/outline/esm/ArrowLeftIcon.js","../node_modules/@heroicons/react/24/outline/esm/PaperAirplaneIcon.js","../node_modules/@heroicons/react/24/outline/esm/CheckIcon.js"],"sourcesContent":["import * as React from \"react\";\nfunction EllipsisHorizontalIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(EllipsisHorizontalIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction TrashIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TrashIcon);\nexport default ForwardRef;","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { useMessage } from '../contexts/MessageContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { \n  ChatBubbleLeftRightIcon as ChatIcon, \n  PaperAirplaneIcon, \n  CheckIcon,\n  CheckCircleIcon,\n  XMarkIcon,\n  EllipsisHorizontalIcon,\n  PencilIcon,\n  TrashIcon,\n  ArrowLeftIcon\n} from '@heroicons/react/24/outline';\nimport { formatDistanceToNow } from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport { Message } from '../types';\n\nconst MessagesPage: React.FC = () => {\n  const {\n    conversations,\n    sendMessage,\n    markAsRead,\n    getConversationMessages,\n    loading,\n    editMessage,\n    deleteMessage,\n    deleteConversation,\n  } = useMessage();\n  const { user } = useAuth();\n  const location = useLocation();\n  const [selectedConversation, setSelectedConversation] = useState<string | null>(null);\n  const [newMessage, setNewMessage] = useState('');\n  const [conversationMessages, setConversationMessages] = useState<Message[]>([]);\n  const [isSending, setIsSending] = useState(false);\n  const [readConversations, setReadConversations] = useState<Set<string>>(new Set());\n  const [userHasManuallyClosed, setUserHasManuallyClosed] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const [openMenuId, setOpenMenuId] = useState<string | null>(null);\n  const [hiddenConversations, setHiddenConversations] = useState<Set<string>>(new Set());\n  const [isMobileView, setIsMobileView] = useState(false);\n\n  const currentConversation = conversations.find(c => c.id === selectedConversation);\n\n  // Charger les messages quand une conversation est sélectionnée\n  const loadConversationMessages = useCallback(async (conversationId: string) => {\n    if (!getConversationMessages) return;    \n    const messages = await getConversationMessages(conversationId);\n    setConversationMessages(messages);\n  }, [getConversationMessages]);\n\n  useEffect(() => {\n    if (selectedConversation) {\n      loadConversationMessages(selectedConversation);\n    }\n  }, [selectedConversation, loadConversationMessages]);\n\n  // Faire défiler vers le bas quand de nouveaux messages arrivent\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [conversationMessages]);\n\n  // Marquer les messages comme lus quand on ouvre une conversation\n  useEffect(() => {\n    if (selectedConversation && user && markAsRead) {\n      const unreadMessages = conversationMessages.filter(\n        msg => msg.receiverId === user.id && !msg.isRead\n      );\n      \n      // Marquer la conversation comme lue localement\n      if (unreadMessages.length > 0) {\n        setReadConversations(prev => new Set([...prev, selectedConversation]));\n      }\n\n\n      // Marquer les messages comme lus dans l'API\n      unreadMessages.forEach(async (msg) => {\n        try {\n          await markAsRead(msg.id);\n        } catch (error) {\n          console.error('Erreur marquage comme lu:', error);\n        }\n      });\n    }\n  }, [selectedConversation, conversationMessages, user, markAsRead]);\n\n  const handleSendMessage = async () => {\n    if (!newMessage.trim() || !currentConversation || !user || isSending) return;\n    \n    const otherParticipant = currentConversation.participants.find(p => p.id !== user.id);\n    if (!otherParticipant) return;\n\n    setIsSending(true);\n    try {\n      await sendMessage(otherParticipant.id, newMessage);\n      setNewMessage('');\n      // Recharger les messages de la conversation\n      if (selectedConversation) {\n        await loadConversationMessages(selectedConversation);\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'envoi du message:', error);\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // Fonction pour quitter la conversation\n  const handleCloseConversation = () => {\n    setSelectedConversation(null);\n    setNewMessage('');\n    setUserHasManuallyClosed(true);\n  };\n\n  // Sélectionner automatiquement la première conversation seulement si l'utilisateur n'a pas fermé manuellement\n  useEffect(() => {\n    if (\n      conversations.length > 0 &&\n      !selectedConversation &&\n      !loading &&\n      !userHasManuallyClosed &&\n      !isMobileView\n    ) {\n      setSelectedConversation(conversations[0].id);\n    }\n  }, [conversations, selectedConversation, loading, userHasManuallyClosed, isMobileView]);\n\n  // Auto-sélection via query param ?to=<userId> & optionnellement prefill=<message>\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const toUserId = params.get('to');\n    const prefill = params.get('prefill');\n    if (!toUserId || conversations.length === 0) return;\n\n    const target = conversations.find(conv => conv.participants.some(p => String(p.id) === String(toUserId)));\n    if (target) {\n      setSelectedConversation(target.id);\n      if (prefill) setNewMessage(prefill);\n    }\n  }, [location.search, conversations]);\n\n  // Réinitialiser le flag de fermeture manuelle quand l'utilisateur sélectionne une conversation\n  useEffect(() => {\n    if (selectedConversation) {\n      setUserHasManuallyClosed(false);\n    }\n  }, [selectedConversation]);\n\n  // Charger/sauvegarder les conversations masquées (par utilisateur)\n  useEffect(() => {\n    if (!user) return;\n    const key = `hidden_conversations_${user.id}`;\n    try {\n      const raw = localStorage.getItem(key);\n      if (raw) setHiddenConversations(new Set<string>(JSON.parse(raw)));\n    } catch {}\n  }, [user]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobileView(window.innerWidth < 1024);\n    };\n\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const persistHiddenConversations = (next: Set<string>) => {\n    if (!user) return;\n    const key = `hidden_conversations_${user.id}`;\n    try { localStorage.setItem(key, JSON.stringify(Array.from(next))); } catch {}\n  };\n\n  const hideConversationForMe = (conversationId: string) => {\n    setHiddenConversations(prev => {\n      const next = new Set(prev);\n      next.add(conversationId);\n      persistHiddenConversations(next);\n      return next;\n    });\n    if (selectedConversation === conversationId) {\n      setSelectedConversation(null);\n    }\n    setOpenMenuId(null);\n  };\n\n  // Fermer menu sur clic global\n  useEffect(() => {\n    const onDocClick = () => setOpenMenuId(null);\n    document.addEventListener('click', onDocClick);\n    return () => document.removeEventListener('click', onDocClick);\n  }, []);\n\n  // Fonction pour calculer le nombre de messages non lus affichés\n  const getDisplayUnreadCount = (conversation: any) => {\n  const isSelected = selectedConversation === conversation.id;\n\n  // Si la conversation est ouverte → on la considère comme lue\n  if (isSelected) return 0;\n\n  // Si la conversation a été déjà ouverte au moins une fois\n  if (readConversations.has(conversation.id)) return 0;\n\n  // Afficher le badge seulement si le dernier message vient de l'autre participant et qu'il n'est pas lu\n  const lastMsg = conversation.lastMessage;\n  if (!lastMsg) return 0;\n\n  const isFromOther = String(lastMsg.senderId) !== String(user?.id);\n  const isUnread = !lastMsg.isRead;\n\n  return isFromOther && isUnread ? 1 : 0;\n};\n\n  const handleBackToList = () => {\n    setSelectedConversation(null);\n    setUserHasManuallyClosed(true);\n  };\n\n  const showConversationList = !isMobileView || !selectedConversation;\n  const showConversationPanel = !isMobileView || !!selectedConversation;\n  const currentParticipant = currentConversation?.participants.find(p => p.id !== user?.id);\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">\n            Messages\n          </h1>\n          <p className=\"text-gray-600\">\n            Communiquez avec les propriétaires et les étudiants\n          </p>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n          <div className=\"flex flex-col lg:flex-row h-[calc(100vh-220px)] min-h-[520px]\">\n            {/* Conversations List */}\n            <div\n              className={`${showConversationList ? 'flex' : 'hidden'} lg:flex lg:w-1/3 border-r border-gray-200 flex-col bg-white`}\n            >\n              <div className=\"p-4 border-b border-gray-200\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">Conversations</h2>\n              </div>\n              \n              <div className=\"flex-1 overflow-y-auto\">\n                {loading ? (\n                  <div className=\"flex items-center justify-center h-full\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600\"></div>\n                  </div>\n                ) : conversations.filter(c => !hiddenConversations.has(c.id)).length === 0 ? (\n                  <div className=\"flex flex-col items-center justify-center h-full text-gray-500\">\n                    <ChatIcon className=\"w-12 h-12 mb-4\" />\n                    <p className=\"text-center\">Aucune conversation</p>\n                    <p className=\"text-sm text-center mt-2\">Commencez une nouvelle conversation depuis une annonce</p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-1\">\n                    {conversations.filter(c => !hiddenConversations.has(c.id)).map((conversation) => {\n                      const otherParticipant = conversation.participants.find(p => p.id !== user.id);\n                      if (!otherParticipant) return null;\n\n                      const displayUnreadCount = getDisplayUnreadCount(conversation);\n\n                      return (\n                        <button\n                          key={conversation.id}\n                          onClick={() => {\n                            setSelectedConversation(conversation.id);\n                            setOpenMenuId(null);\n                            setUserHasManuallyClosed(false);\n                          }}\n                          className={`w-full p-4 text-left hover:bg-gray-50 transition-colors ${\n                            selectedConversation === conversation.id\n                              ? 'bg-primary-50 border-r-2 border-primary-500'\n                              : ''\n                          }`}\n                        >\n                          <div className=\"flex items-center space-x-3\">\n                            <div className=\"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center\">\n                              <span className=\"text-primary-600 font-medium text-sm\">\n                                {otherParticipant.firstName[0]}{otherParticipant.lastName[0]}\n                              </span>\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-center justify-between\">\n                                <h3 className=\"text-sm font-medium text-gray-900 truncate\">\n                                  {otherParticipant.firstName} {otherParticipant.lastName}\n                                </h3>\n                                <div className=\"flex items-center space-x-2\" onClick={(e) => e.stopPropagation()}>\n                                  {displayUnreadCount > 0 && (\n                                    <span className=\"bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n                                      {displayUnreadCount}\n                                    </span>\n                                  )}\n                                  <div className=\"relative\">\n                                    <button\n                                      className=\"p-1 text-gray-400 hover:text-gray-600 rounded hover:bg-gray-100\"\n                                      title=\"Options\"\n                                      onClick={(e) => { e.stopPropagation(); setOpenMenuId(prev => prev === conversation.id ? null : conversation.id); }}\n                                    >\n                                      <EllipsisHorizontalIcon className=\"w-5 h-5\" />\n                                    </button>\n                                    {openMenuId === conversation.id && (\n                                      <div className=\"absolute right-0 mt-1 bg-white border border-gray-200 rounded shadow z-10\">\n                                        <button\n                                          className=\"block w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                                          onClick={() => hideConversationForMe(conversation.id)}\n                                        >\n                                          Supprimer pour moi\n                                        </button>\n                                      </div>\n                                    )}\n                                  </div>\n                                </div>\n                              </div>\n                              {conversation.lastMessage && (\n                                <p className={`text-sm truncate ${\n                                  displayUnreadCount > 0 ? 'text-gray-900 font-medium' : 'text-gray-500'\n                                }`}>\n                                  {conversation.lastMessage.content}\n                                </p>\n                              )}\n                              <p className=\"text-xs text-gray-400\">\n                                {conversation.lastMessage && formatDistanceToNow(\n                                  new Date(conversation.lastMessage.createdAt),\n                                  { addSuffix: true, locale: fr }\n                                )}\n                              </p>\n                            </div>\n                          </div>\n                        </button>\n                      );\n                    })}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Messages Area */}\n            <div\n              className={`${showConversationPanel ? 'flex' : 'hidden'} flex-1 flex-col bg-gray-50`}\n            >\n              {currentConversation ? (\n                <>\n                  {/* Chat Header avec bouton de fermeture */}\n                  <div className=\"p-4 border-b border-gray-200 flex items-center justify-between bg-white\">\n                    <div className=\"flex items-center space-x-3\">\n                      {isMobileView && (\n                        <button\n                          onClick={handleBackToList}\n                          className=\"mr-2 rounded-full p-2 text-gray-500 hover:text-gray-800 hover:bg-gray-100\"\n                          title=\"Retour aux conversations\"\n                        >\n                          <ArrowLeftIcon className=\"w-5 h-5\" />\n                        </button>\n                      )}\n                      <div className=\"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center\">\n                        <span className=\"text-primary-600 font-medium text-sm\">\n                          {currentParticipant?.firstName?.[0]}\n                          {currentParticipant?.lastName?.[0]}\n                        </span>\n                      </div>\n                      <div>\n                        <h3 className=\"text-lg font-semibold text-gray-900\">\n                          {currentParticipant?.firstName} {currentParticipant?.lastName}\n                        </h3>\n                        <p className=\"text-sm text-gray-500\">\n                          {currentParticipant?.userType === 'student' ? 'Étudiant' : 'Propriétaire'}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <button\n                        onClick={handleCloseConversation}\n                        className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors\"\n                        title=\"Fermer la conversation\"\n                      >\n                        <XMarkIcon className=\"w-5 h-5\" />\n                      </button>\n                      <button\n                        onClick={async () => {\n                          if (!selectedConversation) return;\n                          if (window.confirm('Supprimer cette conversation ? Cette action est irréversible.')) {\n                            try { await deleteConversation(selectedConversation); setSelectedConversation(null); } catch {}\n                          }\n                        }}\n                        className=\"text-sm text-red-600 hover:text-red-700\"\n                        title=\"Supprimer la conversation\"\n                      >\n                        Supprimer\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* Messages */}\n                  <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n                    {conversationMessages.length === 0 ? (\n                      <div className=\"flex flex-col items-center justify-center h-full text-gray-500\">\n                        <ChatIcon className=\"w-12 h-12 mb-4\" />\n                        <p>Aucun message dans cette conversation</p>\n                        <p className=\"text-sm\">Envoyez le premier message !</p>\n                      </div>\n                    ) : (\n                      <>\n                        {conversationMessages.map((message) => {\n                          const isOwn = String(message.senderId) === String(user.id);\n\n                          return (\n                            <div\n                              key={message.id}\n                              className={`flex ${isOwn ? 'justify-end' : 'justify-start'} mb-2`}\n                            >\n                              <div\n                                className={`max-w-[75%] px-4 py-2 rounded-2xl shadow-sm ${\n                                  isOwn\n                                    ? 'bg-primary-600 text-white rounded-br-none'\n                                    : 'bg-gray-100 text-gray-900 rounded-bl-none border border-gray-200'\n                                }`}\n                              >\n                                <p className=\"text-sm break-words\">{message.content}</p>\n                                <div className={`flex items-center justify-end mt-1 space-x-1 text-xs ${\n                                  isOwn ? 'text-primary-100' : 'text-gray-500'\n                                }`}>\n                                  <span>{formatDistanceToNow(new Date(message.createdAt), { addSuffix: true, locale: fr })}</span>\n                                  {isOwn && (\n                                    <div className=\"flex items-center\">\n                                      {message.isRead ? (\n                                        <CheckCircleIcon className=\"w-3 h-3\" />\n                                      ) : (\n                                        <CheckIcon className=\"w-3 h-3\" />\n                                      )}\n                                    </div>\n                                  )}\n                                </div>\n                                {isOwn && (\n                                  <div className=\"mt-1 flex justify-end space-x-1 text-xs\">\n                                    <button\n                                      className=\"p-1 rounded-full text-blue-600 hover:text-blue-700 hover:bg-blue-50\"\n                                      title=\"Modifier le message\"\n                                      onClick={async () => {\n                                        const updated = prompt('Modifier le message:', message.content);\n                                        if (updated !== null && updated.trim() && updated !== message.content) {\n                                          try { await editMessage(message.id, updated); } catch {}\n                                        }\n                                      }}\n                                    >\n                                      <PencilIcon className=\"w-4 h-4\" />\n                                    </button>\n                                    <button\n                                      className=\"p-1 rounded-full text-red-600 hover:text-red-700 hover:bg-red-50\"\n                                      title=\"Supprimer le message\"\n                                      onClick={async () => {\n                                        if (window.confirm('Supprimer ce message ?')) {\n                                          try { await deleteMessage(message.id); } catch {}\n                                        }\n                                      }}\n                                    >\n                                      <TrashIcon className=\"w-4 h-4\" />\n                                    </button>\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                          );\n                        })}\n                        \n                      </>\n                    )}\n                  </div>\n\n                  {/* Message Input */}\n                  <div className=\"p-4 border-t border-gray-200 bg-white\">\n                    <div className=\"flex space-x-2\">\n                      <textarea\n                        value={newMessage}\n                        onChange={(e) => setNewMessage(e.target.value)}\n                        onKeyPress={handleKeyPress}\n                        placeholder=\"Tapez votre message...\"\n                        rows={2}\n                        className=\"flex-1 input-field resize-none\"\n                        disabled={isSending}\n                      />\n                      <button\n                        onClick={handleSendMessage}\n                        disabled={!newMessage.trim() || isSending}\n                        className=\"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {isSending ? (\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                        ) : (\n                          <PaperAirplaneIcon className=\"w-4 h-4\" />\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                </>\n              ) : (\n                <div className=\"flex-1 flex items-center justify-center text-gray-500 bg-white\">\n                  <div className=\"text-center px-6\">\n                    <ChatIcon className=\"w-16 h-16 mx-auto mb-4 text-primary-400\" />\n                    <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n                      {conversations.length === 0 ? 'Aucune conversation' : 'Sélectionnez une conversation'}\n                    </h3>\n                    <p className=\"text-sm text-gray-500\">\n                      {conversations.length === 0 \n                        ? 'Commencez une nouvelle conversation depuis une annonce.' \n                        : 'Choisissez une conversation pour commencer à discuter.'\n                      }\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MessagesPage;\n","import * as React from \"react\";\nfunction PencilIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PencilIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CheckCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CheckCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowLeftIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PaperAirplaneIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PaperAirplaneIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CheckIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m4.5 12.75 6 6 9-13.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CheckIcon);\nexport default ForwardRef;"],"names":["EllipsisHorizontalIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","TrashIcon","MessagesPage","_currentParticipant$f","_currentParticipant$l","conversations","sendMessage","markAsRead","getConversationMessages","loading","editMessage","deleteMessage","deleteConversation","useMessage","user","useAuth","location","useLocation","selectedConversation","setSelectedConversation","useState","newMessage","setNewMessage","conversationMessages","setConversationMessages","isSending","setIsSending","readConversations","setReadConversations","Set","userHasManuallyClosed","setUserHasManuallyClosed","messagesEndRef","useRef","openMenuId","setOpenMenuId","hiddenConversations","setHiddenConversations","isMobileView","setIsMobileView","currentConversation","find","c","loadConversationMessages","useCallback","async","messages","conversationId","useEffect","_messagesEndRef$curre","current","scrollIntoView","behavior","unreadMessages","filter","msg","receiverId","isRead","length","prev","forEach","error","console","handleSendMessage","trim","otherParticipant","participants","p","params","URLSearchParams","search","toUserId","get","prefill","target","conv","some","String","key","concat","raw","localStorage","getItem","JSON","parse","_unused","handleResize","window","innerWidth","addEventListener","removeEventListener","hideConversationForMe","next","add","setItem","stringify","Array","from","_unused2","persistHiddenConversations","onDocClick","document","showConversationList","showConversationPanel","currentParticipant","_jsx","className","children","_jsxs","has","ChatIcon","map","conversation","displayUnreadCount","lastMsg","lastMessage","isFromOther","senderId","isUnread","getDisplayUnreadCount","onClick","firstName","lastName","e","stopPropagation","content","formatDistanceToNow","Date","createdAt","addSuffix","locale","fr","_Fragment","handleBackToList","ArrowLeftIcon","userType","handleCloseConversation","XMarkIcon","confirm","_unused3","message","isOwn","CheckCircleIcon","CheckIcon","updated","prompt","_unused4","PencilIcon","_unused5","value","onChange","onKeyPress","shiftKey","preventDefault","placeholder","rows","disabled","PaperAirplaneIcon"],"sourceRoot":""}