"use strict";(self.webpackChunkcolocation_antananarivo=self.webpackChunkcolocation_antananarivo||[]).push([[151],{5151:(e,s,t)=>{t.r(s),t.d(s,{default:()=>V});var r=t(9379),a=t(5043),l=t(3216),i=t(9741),n=t(4558),c=t(343),d=t(4239),o=t(9265),x=t(2903),m=t(4338),h=t(3315),u=t(3063),p=t(9422),g=t(5989),b=t(2704),f=t(9399),j=t(5501),N=t(2556),y=t(7459),v=t(8153),w=t(7504),k=t(5590),A=t(7591),C=t(2339),I=t(579);const V=()=>{var e,s,t;const{user:V,logout:S}=(0,i.A)(),E=(0,l.Zp)(),[T,P]=(0,a.useState)("users"),[_,D]=(0,a.useState)(!1),[R,L]=(0,a.useState)([]),[z,U]=(0,a.useState)([]),[q,G]=(0,a.useState)([]),[M,J]=(0,a.useState)([]),[B,F]=(0,a.useState)(!1),[H,O]=(0,a.useState)({open:!1,type:null,id:null,reason:""}),[W,Z]=(0,a.useState)({open:!1,user:null}),[K,Q]=(0,a.useState)(null),[X,Y]=(0,a.useState)(null),[$,ee]=(0,a.useState)({totalUsers:0,totalProperties:0,totalAnnouncements:0,pendingVerifications:0,newUsersToday:0,activeListings:0}),[se,te]=(0,a.useState)({open:!1,userId:null,reason:""});(0,a.useEffect)(()=>{ae(),re()},[T]);const re=async()=>{try{ee({totalUsers:R.length,totalProperties:z.length,totalAnnouncements:q.length,pendingVerifications:M.length,newUsersToday:R.filter(e=>{const s=new Date(e.createdAt||e.created_at);return(new Date).toDateString()===s.toDateString()}).length,activeListings:z.filter(e=>e.isAvailable).length})}catch(e){console.error("Erreur chargement stats:",e)}},ae=async()=>{F(!0);try{const[s,t,r,a]=await Promise.all([(0,n.apiGet)("/api/admin/users_list"),(0,n.apiGet)("/api/admin/announcements_list"),(0,n.apiGet)("/api/admin/properties_list"),(0,n.apiGet)("/api/admin/cin_to_verify")]);var e;if(s.success?L(s.data||[]):(console.warn("Erreur chargement utilisateurs:",s.message),L([])),t.success?G(t.data||[]):(console.warn("Erreur chargement annonces:",t.message),G([])),r.success?U(r.data||[]):(console.warn("Erreur chargement propri\xe9t\xe9s:",r.message),U([])),console.log("R\xe9ponse CIN compl\xe8te:",a),a.success)null!==(e=a.data)&&void 0!==e&&e.cinToVerify&&Array.isArray(a.data.cinToVerify)?J(a.data.cinToVerify):a.data&&Array.isArray(a.data)?J(a.data):a.cinToVerify&&Array.isArray(a.cinToVerify)?J(a.cinToVerify):Array.isArray(a)?J(a):(console.warn("Structure de r\xe9ponse CIN inattendue:",a),J([]));else console.warn("Erreur chargement CIN \xe0 v\xe9rifier:",a.message),J([])}catch(s){console.error("Erreur chargement:",s),C.Ay.error("Erreur lors du chargement des donn\xe9es")}finally{F(!1)}},le=e=>{if(!e)return"/api/placeholder/400/300";return(0,n.VG)(e)||"/api/placeholder/400/300"};if(!V)return(0,I.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,I.jsx)("div",{className:"text-gray-900",children:"Chargement..."})});if("admin"!==V.userType)return(0,I.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,I.jsx)("div",{className:"text-gray-900",children:"Acc\xe8s refus\xe9"})});const ie=async(e,s,t)=>{try{const a={verified:s};!s&&t&&(a.reason=t);(await(0,n.apiJson)("/api/admin/cin_verify/".concat(e),"PUT",a)).success&&(C.Ay.success(s?"CIN v\xe9rifi\xe9e avec succ\xe8s":"CIN rejet\xe9e"),J(s=>s.filter(s=>s.id!==e)),L(t=>t.map(t=>t.id===e?(0,r.A)((0,r.A)({},t),{},{cinVerified:s,isVerified:s}):t)),te({open:!1,userId:null,reason:""}))}catch(a){C.Ay.error(a.message||"Erreur lors de la v\xe9rification")}},ne=M.length,ce=R.filter(e=>{const s=new Date(e.createdAt||e.created_at);return((new Date).getTime()-s.getTime())/36e5<24}).length,de=e=>{const s=String(e.id);return z.filter(e=>{const t=e.ownerId||e.owner_id||e.userId||e.user_id;return t&&String(t)===s}).length+q.filter(e=>{var t;const r=(null===(t=e.author)||void 0===t?void 0:t.id)||e.userId||e.user_id;return r&&String(r)===s}).length};return(0,I.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,I.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,I.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,I.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,I.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,I.jsx)("button",{onClick:()=>D(!_),className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",children:(0,I.jsx)(o.A,{className:"w-6 h-6 text-gray-600"})}),(0,I.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:(0,I.jsx)(v.A,{className:"w-6 h-6 text-white"})}),(0,I.jsxs)("div",{children:[(0,I.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Administration"}),(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Panneau de gestion"})]})]}),(0,I.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,I.jsxs)("button",{onClick:async()=>{try{await S(),E("/admin-login")}catch(e){console.error("Erreur d\xe9connexion admin:",e)}},className:"flex items-center space-x-2 px-3 py-2 rounded-lg border border-red-200 text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:[(0,I.jsx)(c.A,{className:"w-4 h-4"}),(0,I.jsx)("span",{children:"D\xe9connexion"})]}),(0,I.jsxs)("div",{className:"text-right",children:[(0,I.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[V.firstName," ",V.lastName]}),(0,I.jsx)("p",{className:"text-xs text-gray-500",children:"Administrateur"})]}),(0,I.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,I.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[V.firstName[0],V.lastName[0]]})})]})]})})}),(0,I.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,I.jsxs)("div",{className:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:space-x-8",children:[_&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>D(!1)}),(0,I.jsxs)("div",{className:"".concat(_?"fixed":"hidden"," lg:block lg:relative inset-y-0 left-0 z-50 w-64 bg-white lg:bg-transparent shadow-lg lg:shadow-none flex-shrink-0"),children:[(0,I.jsxs)("div",{className:"flex items-center justify-between p-4 lg:hidden border-b",children:[(0,I.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Menu"}),(0,I.jsx)("button",{onClick:()=>D(!1),className:"p-2 rounded-lg hover:bg-gray-100",children:(0,I.jsx)(A.A,{className:"w-6 h-6 text-gray-600"})})]}),(0,I.jsxs)("nav",{className:"space-y-2 p-4 lg:p-0",children:[(0,I.jsxs)("button",{onClick:()=>{P("dashboard"),D(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all ".concat("dashboard"===T?"bg-blue-50 border border-blue-200 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,I.jsx)(h.A,{className:"w-5 h-5"}),(0,I.jsx)("span",{className:"font-medium",children:"Tableau de bord"})]}),(0,I.jsxs)("button",{onClick:()=>{P("users"),D(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all ".concat("users"===T?"bg-blue-50 border border-blue-200 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,I.jsx)(k.A,{className:"w-5 h-5"}),(0,I.jsx)("span",{className:"font-medium",children:"Utilisateurs"}),(0,I.jsx)("span",{className:"ml-auto bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded-full",children:R.length})]}),(0,I.jsxs)("button",{onClick:()=>{P("properties"),D(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all ".concat("properties"===T?"bg-blue-50 border border-blue-200 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,I.jsx)(j.A,{className:"w-5 h-5"}),(0,I.jsx)("span",{className:"font-medium",children:"Logements"}),(0,I.jsx)("span",{className:"ml-auto bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded-full",children:z.length})]}),(0,I.jsxs)("button",{onClick:()=>{P("announcements"),D(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all ".concat("announcements"===T?"bg-blue-50 border border-blue-200 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,I.jsx)(u.A,{className:"w-5 h-5"}),(0,I.jsx)("span",{className:"font-medium",children:"Annonces"}),(0,I.jsx)("span",{className:"ml-auto bg-gray-200 text-gray-700 text-xs px-2 py-1 rounded-full",children:q.length})]}),(0,I.jsxs)("button",{onClick:()=>{P("cin"),D(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all ".concat("cin"===T?"bg-blue-50 border border-blue-200 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,I.jsx)(N.A,{className:"w-5 h-5"}),(0,I.jsx)("span",{className:"font-medium",children:"V\xe9rifications CIN"}),M.length>0&&(0,I.jsx)("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:M.length})]}),(0,I.jsxs)("button",{onClick:()=>{P("settings"),D(!1)},className:"w-full flex items-center space-x-3 px-4 py-3 rounded-xl text-left transition-all ".concat("settings"===T?"bg-blue-50 border border-blue-200 text-blue-700 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),children:[(0,I.jsx)(g.A,{className:"w-5 h-5"}),(0,I.jsx)("span",{className:"font-medium",children:"Param\xe8tres"})]})]}),(0,I.jsxs)("div",{className:"mt-8 p-4 bg-white rounded-xl border border-gray-200 shadow-sm",children:[(0,I.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Aper\xe7u rapide"}),(0,I.jsxs)("div",{className:"space-y-3",children:[(0,I.jsxs)("div",{className:"flex justify-between items-center",children:[(0,I.jsx)("span",{className:"text-xs text-gray-600",children:"Nouveaux utilisateurs"}),(0,I.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["+",$.newUsersToday]})]}),(0,I.jsxs)("div",{className:"flex justify-between items-center",children:[(0,I.jsx)("span",{className:"text-xs text-gray-600",children:"En attente"}),(0,I.jsx)("span",{className:"text-sm font-semibold text-red-600",children:$.pendingVerifications})]}),(0,I.jsxs)("div",{className:"flex justify-between items-center",children:[(0,I.jsx)("span",{className:"text-xs text-gray-600",children:"Actifs"}),(0,I.jsx)("span",{className:"text-sm font-semibold text-blue-600",children:$.activeListings})]})]})]})]}),(0,I.jsxs)("div",{className:"flex-1",children:["dashboard"===T&&(0,I.jsxs)("div",{className:"space-y-6",children:[(0,I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,I.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Utilisateurs totaux"}),(0,I.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.totalUsers})]}),(0,I.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,I.jsx)(w.A,{className:"w-6 h-6 text-blue-600"})})]}),(0,I.jsxs)("div",{className:"mt-4 flex items-center text-sm text-green-600",children:[(0,I.jsx)(d.A,{className:"w-4 h-4 mr-1"}),(0,I.jsx)("span",{children:"+12% ce mois"})]})]}),(0,I.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Logements actifs"}),(0,I.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.totalProperties})]}),(0,I.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,I.jsx)(m.A,{className:"w-6 h-6 text-green-600"})})]}),(0,I.jsxs)("div",{className:"mt-4 flex items-center text-sm text-green-600",children:[(0,I.jsx)(d.A,{className:"w-4 h-4 mr-1"}),(0,I.jsx)("span",{children:"+8% ce mois"})]})]}),(0,I.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Annonces"}),(0,I.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.totalAnnouncements})]}),(0,I.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,I.jsx)(b.A,{className:"w-6 h-6 text-purple-600"})})]}),(0,I.jsxs)("div",{className:"mt-4 flex items-center text-sm text-green-600",children:[(0,I.jsx)(d.A,{className:"w-4 h-4 mr-1"}),(0,I.jsx)("span",{children:"+15% ce mois"})]})]})]}),(0,I.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,I.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[(0,I.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[(0,I.jsx)(f.A,{className:"w-5 h-5 text-yellow-500"}),(0,I.jsx)("span",{children:"Alertes en attente"})]}),(0,I.jsxs)("div",{className:"space-y-3",children:[M.length>0&&(0,I.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,I.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,I.jsx)(N.A,{className:"w-5 h-5 text-yellow-600"}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("p",{className:"text-sm font-medium text-yellow-800",children:[M.length," CIN \xe0 v\xe9rifier"]}),(0,I.jsx)("p",{className:"text-xs text-yellow-600",children:"Action requise"})]})]}),(0,I.jsx)("button",{onClick:()=>P("cin"),className:"text-xs bg-yellow-100 text-yellow-700 px-3 py-1 rounded-full hover:bg-yellow-200 transition-colors",children:"V\xe9rifier"})]}),(0,I.jsxs)("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,I.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,I.jsx)(x.A,{className:"w-5 h-5 text-blue-600"}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("p",{className:"text-sm font-medium text-blue-800",children:[$.newUsersToday," nouveaux utilisateurs aujourd'hui"]}),(0,I.jsx)("p",{className:"text-xs text-blue-600",children:"Derni\xe8res 24h"})]})]}),(0,I.jsx)("button",{onClick:()=>P("users"),className:"text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200 transition-colors",children:"Voir"})]})]})]}),(0,I.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions rapides"}),(0,I.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,I.jsxs)("button",{onClick:()=>P("users"),className:"p-4 bg-gray-50 rounded-lg text-left hover:bg-gray-100 transition-colors",children:[(0,I.jsx)(k.A,{className:"w-6 h-6 text-gray-600 mb-2"}),(0,I.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"G\xe9rer utilisateurs"}),(0,I.jsx)("p",{className:"text-xs text-gray-600",children:"Voir et modifier"})]}),(0,I.jsxs)("button",{onClick:()=>P("properties"),className:"p-4 bg-gray-50 rounded-lg text-left hover:bg-gray-100 transition-colors",children:[(0,I.jsx)(j.A,{className:"w-6 h-6 text-gray-600 mb-2"}),(0,I.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Logements"}),(0,I.jsxs)("p",{className:"text-xs text-gray-600",children:[z.length," publi\xe9s"]})]}),(0,I.jsxs)("button",{onClick:()=>P("announcements"),className:"p-4 bg-gray-50 rounded-lg text-left hover:bg-gray-100 transition-colors",children:[(0,I.jsx)(u.A,{className:"w-6 h-6 text-gray-600 mb-2"}),(0,I.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Annonces"}),(0,I.jsxs)("p",{className:"text-xs text-gray-600",children:[q.length," actives"]})]}),(0,I.jsxs)("button",{onClick:()=>P("cin"),className:"p-4 bg-gray-50 rounded-lg text-left hover:bg-gray-100 transition-colors",children:[(0,I.jsx)(v.A,{className:"w-6 h-6 text-gray-600 mb-2"}),(0,I.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"V\xe9rifications"}),(0,I.jsxs)("p",{className:"text-xs text-gray-600",children:[M.length," en attente"]})]})]})]})]}),(0,I.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Activit\xe9 r\xe9cente"}),(0,I.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Histogramme bas\xe9 sur le nombre de logements et d'annonces par utilisateur."}),(()=>{const e=R.slice(0,5),s=e.reduce((e,s)=>{const t=de(s);return t>e?t:e},0);return(0,I.jsx)("div",{className:"space-y-3",children:e.map(e=>{const t=de(e),r=s>0?t/s*100:0;return(0,I.jsxs)("div",{className:"py-3 border-b border-gray-100 last:border-0",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,I.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,I.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:(0,I.jsxs)("span",{className:"text-xs font-medium text-gray-700",children:[e.firstName[0],e.lastName[0]]})}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,I.jsxs)("p",{className:"text-xs text-gray-500",children:["Inscrit le ",new Date(e.createdAt).toLocaleDateString("fr-FR")]})]})]}),(0,I.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("admin"===e.userType?"bg-purple-100 text-purple-800":"owner"===e.userType?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e.userType})]}),(0,I.jsxs)("div",{className:"mt-1",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,I.jsx)("span",{className:"text-[11px] text-gray-500",children:"Score activit\xe9"}),(0,I.jsx)("span",{className:"text-[11px] text-gray-600 font-medium",children:t})]}),(0,I.jsx)("div",{className:"w-full h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,I.jsx)("div",{className:"h-2 bg-blue-500 rounded-full transition-all",style:{width:"".concat(r,"%")}})})]})]},e.id)})})})()]})]}),"users"===T&&(0,I.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,I.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Gestion des Utilisateurs"}),(0,I.jsx)("div",{className:"overflow-x-auto",children:(0,I.jsxs)("table",{className:"min-w-full text-sm",children:[(0,I.jsx)("thead",{children:(0,I.jsxs)("tr",{className:"text-left text-gray-600 border-b border-gray-200",children:[(0,I.jsx)("th",{className:"p-3",children:"ID"}),(0,I.jsx)("th",{className:"p-3",children:"Email"}),(0,I.jsx)("th",{className:"p-3",children:"Nom"}),(0,I.jsx)("th",{className:"p-3",children:"Type"}),(0,I.jsx)("th",{className:"p-3",children:"V\xe9rifi\xe9"}),(0,I.jsx)("th",{className:"p-3",children:"Actions"})]})}),(0,I.jsx)("tbody",{children:R.map(e=>(0,I.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50 cursor-pointer",onClick:()=>Z({open:!0,user:e}),children:[(0,I.jsx)("td",{className:"p-3 text-gray-900 bg-white",children:e.id}),(0,I.jsx)("td",{className:"p-3 text-gray-900 bg-white",children:e.email}),(0,I.jsxs)("td",{className:"p-3 text-gray-900 bg-white",children:[e.firstName," ",e.lastName]}),(0,I.jsx)("td",{className:"p-3 bg-white",children:(0,I.jsx)("span",{className:"badge ".concat("admin"===e.userType?"badge-primary":"owner"===e.userType?"badge-warning":"badge-success"),children:e.userType})}),(0,I.jsx)("td",{className:"p-3",children:e.isVerified||e.is_verified||e.cinVerified||e.cin_verified?(0,I.jsx)("span",{className:"badge badge-success",children:"\u2713 V\xe9rifi\xe9"}):(0,I.jsx)("span",{className:"badge badge-warning",children:"Non v\xe9rifi\xe9"})}),(0,I.jsx)("td",{className:"p-3 bg-white",onClick:e=>e.stopPropagation(),children:(0,I.jsx)("button",{onClick:()=>O({open:!0,type:"user",id:e.id,reason:""}),className:"text-red-600 hover:text-red-700 p-2 rounded-full hover:bg-red-50 transition-colors",title:"Supprimer l'utilisateur",children:(0,I.jsx)(A.A,{className:"w-5 h-5"})})})]},e.id))})]})})]}),"announcements"===T&&(0,I.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,I.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Annonces \xc9tudiantes"}),K?(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsxs)("button",{onClick:()=>Q(null),className:"btn-secondary text-sm mb-4 flex items-center space-x-2",children:[(0,I.jsx)(A.A,{className:"w-4 h-4"}),(0,I.jsx)("span",{children:"Retour \xe0 la liste"})]}),(0,I.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,I.jsxs)("div",{className:"mb-4",children:[(0,I.jsxs)("span",{className:"text-xs text-gray-500",children:["ID: ",K.id]}),(0,I.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mt-2",children:["Auteur: ",null===(e=K.author)||void 0===e?void 0:e.firstName," ",null===(s=K.author)||void 0===s?void 0:s.lastName]}),(0,I.jsxs)("p",{className:"text-sm text-gray-500",children:["Publi\xe9e le: ",new Date(K.createdAt).toLocaleString("fr-FR")]})]}),K.images&&K.images.length>0&&(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Images de l'annonce:"}),(0,I.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:K.images.map((e,s)=>(0,I.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,I.jsx)("img",{src:le(e),alt:"Annonce ".concat(s+1),className:"w-full h-32 object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(le(e),"_blank")})},s))})]}),(0,I.jsxs)("div",{className:"mt-4",children:[(0,I.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Contenu:"}),(0,I.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap bg-gray-50 p-4 rounded-lg",children:K.content})]}),K.budget&&(0,I.jsxs)("div",{className:"mt-4",children:[(0,I.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Budget:"}),(0,I.jsxs)("p",{className:"text-lg font-semibold text-primary-600",children:[K.budget.toLocaleString()," Ar/mois"]})]}),(0,I.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,I.jsxs)("button",{onClick:()=>O({open:!0,type:"announcement",id:K.id,reason:""}),className:"btn-danger text-sm flex items-center space-x-2",children:[(0,I.jsx)(A.A,{className:"w-4 h-4"}),(0,I.jsx)("span",{children:"Supprimer cette annonce"})]})})]})]}):(0,I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[q.map(e=>{var s,t;return(0,I.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-shadow hover:shadow-md",onClick:()=>Q(e),children:[e.images&&e.images.length>0&&(0,I.jsx)("div",{className:"mb-3",children:(0,I.jsx)("img",{src:le(e.images[0]),alt:"Annonce",className:"w-full h-40 object-cover rounded-lg"})}),(0,I.jsx)("div",{className:"mb-2",children:(0,I.jsxs)("span",{className:"text-xs text-gray-500",children:["ID: ",e.id]})}),(0,I.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-2 line-clamp-2",children:[null===(s=e.author)||void 0===s?void 0:s.firstName," ",null===(t=e.author)||void 0===t?void 0:t.lastName]}),(0,I.jsx)("p",{className:"text-sm text-gray-700 mb-3 line-clamp-3",children:e.content}),(0,I.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,I.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("fr-FR")}),(0,I.jsx)("span",{children:Array.isArray(e.images)?"".concat(e.images.length," image(s)"):"0 image"})]}),(0,I.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,I.jsx)("button",{onClick:()=>Q(e),className:"btn-secondary text-xs",children:"D\xe9tails"}),(0,I.jsx)("button",{onClick:s=>{s.stopPropagation(),O({open:!0,type:"announcement",id:e.id,reason:""})},className:"btn-danger text-xs",children:"Supprimer"})]})]},e.id)}),0===q.length&&(0,I.jsx)("p",{className:"text-gray-600 text-center py-8 col-span-full",children:"Aucune annonce"})]})]}),"properties"===T&&(0,I.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,I.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"Appartements Publi\xe9s"}),X?(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsxs)("button",{onClick:()=>Y(null),className:"btn-secondary text-sm mb-4 flex items-center space-x-2",children:[(0,I.jsx)(A.A,{className:"w-4 h-4"}),(0,I.jsx)("span",{children:"Retour \xe0 la liste"})]}),(0,I.jsxs)("div",{className:"border border-dark-200 rounded-lg p-6",children:[(0,I.jsxs)("div",{className:"mb-4",children:[(0,I.jsx)("h3",{className:"text-xl font-semibold text-dark-900",children:X.title}),(0,I.jsxs)("p",{className:"text-sm text-dark-500 mt-1",children:["ID: ",X.id]}),(0,I.jsxs)("p",{className:"text-sm text-dark-500",children:["Propri\xe9taire ID: ",X.ownerId]})]}),X.images&&X.images.length>0&&(0,I.jsxs)("div",{className:"mb-6",children:[(0,I.jsx)("h4",{className:"text-sm font-medium text-dark-700 mb-3",children:"Images du logement:"}),(0,I.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:X.images.map((e,s)=>(0,I.jsx)("div",{className:"border border-dark-200 rounded-lg overflow-hidden",children:(0,I.jsx)("img",{src:le(e),alt:"".concat(X.title," ").concat(s+1),className:"w-full h-32 object-cover cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(le(e),"_blank")})},s))})]}),(0,I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"text-sm font-medium text-dark-700",children:"Prix:"}),(0,I.jsxs)("p",{className:"text-dark-900 text-lg font-semibold",children:[null===(t=X.price)||void 0===t?void 0:t.toLocaleString()," Ar/mois"]})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"text-sm font-medium text-dark-700",children:"District:"}),(0,I.jsx)("p",{className:"text-dark-900",children:X.district||"N/A"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"text-sm font-medium text-dark-700",children:"Adresse:"}),(0,I.jsx)("p",{className:"text-dark-900",children:X.address||"N/A"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"text-sm font-medium text-dark-700",children:"Type:"}),(0,I.jsx)("p",{className:"text-dark-900",children:"apartment"===X.propertyType?"Appartement":"house"===X.propertyType?"Maison":"Studio"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"text-sm font-medium text-dark-700",children:"Chambres:"}),(0,I.jsxs)("p",{className:"text-dark-900",children:[X.availableRooms,"/",X.totalRooms]})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("span",{className:"text-sm font-medium text-dark-700",children:"Statut:"}),(0,I.jsx)("p",{className:X.isAvailable?"badge badge-success":"badge badge-danger",children:X.isAvailable?"Disponible":"Occup\xe9"})]})]}),X.description&&(0,I.jsxs)("div",{className:"mb-4",children:[(0,I.jsx)("span",{className:"text-sm font-medium text-dark-700",children:"Description:"}),(0,I.jsx)("p",{className:"text-dark-900 mt-1 bg-dark-50 p-3 rounded-lg",children:X.description})]}),X.amenities&&X.amenities.length>0&&(0,I.jsxs)("div",{className:"mb-4",children:[(0,I.jsx)("span",{className:"text-sm font-medium text-dark-700",children:"\xc9quipements:"}),(0,I.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:X.amenities.map((e,s)=>(0,I.jsx)("span",{className:"badge badge-primary text-xs",children:e},s))})]}),(0,I.jsx)("div",{className:"mt-6 pt-4 border-t border-dark-200",children:(0,I.jsxs)("button",{onClick:()=>O({open:!0,type:"property",id:X.id,reason:""}),className:"btn-danger text-sm flex items-center space-x-2",children:[(0,I.jsx)(A.A,{className:"w-4 h-4"}),(0,I.jsx)("span",{children:"Supprimer ce logement"})]})})]})]}):(0,I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[z.map(e=>{var s;return(0,I.jsxs)("div",{className:"border border-dark-200 rounded-lg p-4 hover:bg-dark-50 cursor-pointer transition-shadow hover:shadow-md",onClick:async()=>{try{const s=await(0,n.apiGet)("/api/properties/get_by_id/".concat(e.id));s.success&&Y(s.data)}catch(s){C.Ay.error("Erreur lors du chargement du logement")}},children:[e.images&&e.images.length>0&&(0,I.jsxs)("div",{className:"mb-3 relative",children:[(0,I.jsx)("img",{src:le(e.images[0]),alt:e.title,className:"w-full h-40 object-cover rounded-lg"}),(0,I.jsx)("div",{className:"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-xs",children:"apartment"===e.propertyType?"\ud83c\udfe2":"house"===e.propertyType?"\ud83c\udfe0":"\ud83c\udfe1"})]}),(0,I.jsx)("div",{className:"mb-2",children:(0,I.jsxs)("span",{className:"text-xs text-dark-500",children:["ID: ",e.id]})}),(0,I.jsx)("h3",{className:"text-sm font-semibold text-dark-900 mb-2 line-clamp-2",children:e.title||"Sans titre"}),(0,I.jsxs)("div",{className:"flex items-center text-dark-600 mb-2 text-xs",children:[(0,I.jsx)(y.A,{className:"w-3 h-3 mr-1"}),(0,I.jsx)("span",{className:"line-clamp-1",children:e.address||e.district||"Adresse non sp\xe9cifi\xe9e"})]}),(0,I.jsxs)("p",{className:"text-lg font-bold text-primary-600 mb-3",children:[null===(s=e.price)||void 0===s?void 0:s.toLocaleString()," Ar/mois"]}),(0,I.jsxs)("div",{className:"flex items-center justify-between text-xs text-dark-500",children:[(0,I.jsxs)("span",{children:[e.availableRooms,"/",e.totalRooms," ch."]}),(0,I.jsx)("span",{className:"badge ".concat(e.isAvailable?"badge-success":"badge-danger"),children:e.isAvailable?"Disponible":"Occup\xe9"})]}),(0,I.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,I.jsx)("button",{className:"btn-secondary text-xs",onClick:async s=>{s.stopPropagation();try{const s=await(0,n.apiGet)("/api/properties/get_by_id/".concat(e.id));s.success&&Y(s.data)}catch(t){C.Ay.error("Erreur lors du chargement du logement")}},children:"D\xe9tails"}),(0,I.jsx)("button",{className:"btn-danger text-xs",onClick:s=>{s.stopPropagation(),O({open:!0,type:"property",id:e.id,reason:""})},children:"Supprimer"})]})]},e.id)}),0===z.length&&(0,I.jsx)("p",{className:"text-dark-600 text-center py-8 col-span-full",children:"Aucun appartement publi\xe9"})]})]}),"cin"===T&&(0,I.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,I.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:"CIN \xe0 V\xe9rifier"}),0===M.length?(0,I.jsx)("p",{className:"text-dark-600 text-center py-8",children:"Aucune CIN en attente de v\xe9rification"}):(0,I.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:M.map(e=>(0,I.jsxs)("div",{className:"border rounded-lg p-6 ".concat(e.isExpired?"border-red-500 bg-red-50":"border-dark-200"),children:[(0,I.jsx)("div",{className:"mb-4",children:(0,I.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsxs)("h3",{className:"text-lg font-semibold text-dark-100 mb-1",children:[e.firstName," ",e.lastName]}),(0,I.jsx)("p",{className:"text-sm text-dark-600 mb-1",children:e.email}),(0,I.jsx)("div",{className:"bg-dark-100 rounded p-2 mt-2",children:(0,I.jsxs)("p",{className:"text-sm font-medium text-dark-700",children:["Num\xe9ro CIN: ",(0,I.jsx)("span",{className:"font-bold text-dark-900",children:e.cinNumber||"Non renseign\xe9"})]})}),e.isExpired&&(0,I.jsx)("p",{className:"text-xs text-red-600 mt-2 font-medium bg-red-100 p-2 rounded",children:"\u26a0\ufe0f D\xe9lai de 24h d\xe9pass\xe9 - Compte \xe9ligible \xe0 suppression"})]})})}),(0,I.jsxs)("div",{className:"space-y-4 mb-4",children:[e.cinRectoImagePath?(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"text-sm font-medium text-dark-700 mb-2",children:"Recto de la CIN"}),(0,I.jsx)("div",{className:"relative",children:(0,I.jsx)("img",{src:le(e.cinRectoImagePath),alt:"CIN Recto",className:"w-full h-64 object-contain bg-dark-50 rounded border-2 border-dark-200 hover:border-primary-400 transition-colors cursor-zoom-in",onError:s=>{console.error("Erreur chargement image CIN recto:",e.cinRectoImagePath);const t=s.target;t.onerror=null,t.src="/api/placeholder/300/200"},onClick:()=>{const s=le(e.cinRectoImagePath);s&&window.open(s,"_blank")}})})]}):(0,I.jsx)("div",{className:"bg-gray-100 rounded p-4 text-center",children:(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Image recto non disponible"})}),e.cinVersoImagePath?(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"text-sm font-medium text-dark-700 mb-2",children:"Verso de la CIN"}),(0,I.jsx)("div",{className:"relative",children:(0,I.jsx)("img",{src:le(e.cinVersoImagePath),alt:"CIN Verso",className:"w-full h-64 object-contain bg-dark-50 rounded border-2 border-dark-200 hover:border-primary-400 transition-colors cursor-zoom-in",onError:s=>{console.error("Erreur chargement image CIN verso:",e.cinVersoImagePath);const t=s.target;t.onerror=null,t.src="/api/placeholder/300/200"},onClick:()=>{const s=le(e.cinVersoImagePath);s&&window.open(s,"_blank")}})})]}):(0,I.jsx)("div",{className:"bg-gray-100 rounded p-4 text-center",children:(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Image verso non disponible"})})]}),(0,I.jsxs)("div",{className:"flex space-x-3 pt-4 border-t border-dark-200",children:[(0,I.jsxs)("button",{onClick:()=>ie(e.id,!0),className:"flex-1 btn-primary text-sm flex items-center justify-center space-x-2",children:[(0,I.jsx)(p.A,{className:"w-5 h-5"}),(0,I.jsx)("span",{children:"Approuver"})]}),(0,I.jsxs)("button",{onClick:()=>{return s=e.id,void te({open:!0,userId:s,reason:""});var s},className:"flex-1 btn-secondary text-sm flex items-center justify-center space-x-2",children:[(0,I.jsx)(A.A,{className:"w-5 h-5"}),(0,I.jsx)("span",{children:"Rejeter"})]})]})]},e.id))})]}),"notifications"===T&&(0,I.jsx)("div",{className:"space-y-6",children:(0,I.jsxs)("div",{className:"card",children:[(0,I.jsxs)("h2",{className:"text-xl font-semibold mb-4 text-dark-900 flex items-center space-x-2",children:[(0,I.jsx)(x.A,{className:"w-6 h-6"}),(0,I.jsx)("span",{children:"Notifications"})]}),(0,I.jsxs)("div",{className:"space-y-4",children:[ne>0&&(0,I.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,I.jsxs)("h3",{className:"font-semibold text-yellow-900 mb-2",children:[ne," CIN en attente de v\xe9rification"]}),(0,I.jsx)("button",{onClick:()=>P("cin"),className:"text-sm text-yellow-700 hover:text-yellow-900 underline",children:"Voir les CIN \xe0 v\xe9rifier"})]}),ce>0&&(0,I.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,I.jsxs)("h3",{className:"font-semibold text-blue-900 mb-2",children:[ce," nouveau(x) utilisateur(s) dans les derni\xe8res 24h"]}),(0,I.jsx)("button",{onClick:()=>P("users"),className:"text-sm text-blue-700 hover:text-blue-900 underline",children:"Voir les utilisateurs"})]}),0===ne&&0===ce&&(0,I.jsx)("p",{className:"text-dark-600 text-center py-8",children:"Aucune notification"})]})]})}),"settings"===T&&(0,I.jsx)("div",{className:"space-y-6",children:(0,I.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-6",children:[(0,I.jsxs)("h2",{className:"text-xl font-semibold mb-6 text-gray-900 flex items-center space-x-2",children:[(0,I.jsx)(g.A,{className:"w-6 h-6"}),(0,I.jsx)("span",{children:"Param\xe8tres de la plateforme"})]}),(0,I.jsxs)("div",{className:"space-y-6",children:[(0,I.jsxs)("section",{className:"border-b border-gray-200 pb-6",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Conditions d'utilisation"}),(0,I.jsx)("p",{className:"text-gray-700 mb-4",children:"G\xe9rez les conditions d'utilisation de la plateforme. Les utilisateurs doivent accepter ces conditions lors de l'inscription."}),(0,I.jsxs)("div",{className:"flex space-x-3",children:[(0,I.jsxs)("a",{href:"/terms",target:"_blank",rel:"noopener noreferrer",className:"btn-secondary",children:[(0,I.jsx)(b.A,{className:"w-5 h-5 inline mr-2"}),"Voir les conditions"]}),(0,I.jsx)("button",{onClick:()=>window.open("/terms","_blank"),className:"btn-primary",children:"Modifier"})]})]}),(0,I.jsxs)("section",{className:"border-b border-gray-200 pb-6",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Politique de confidentialit\xe9"}),(0,I.jsx)("p",{className:"text-gray-700 mb-4",children:"G\xe9rez la politique de confidentialit\xe9 de la plateforme. Cette politique explique comment nous collectons et utilisons les donn\xe9es."}),(0,I.jsxs)("div",{className:"flex space-x-3",children:[(0,I.jsxs)("a",{href:"/privacy",target:"_blank",rel:"noopener noreferrer",className:"btn-secondary",children:[(0,I.jsx)(b.A,{className:"w-5 h-5 inline mr-2"}),"Voir la politique"]}),(0,I.jsx)("button",{onClick:()=>window.open("/privacy","_blank"),className:"btn-primary",children:"Modifier"})]})]}),(0,I.jsxs)("section",{className:"border-b border-gray-200 pb-6",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Param\xe8tres g\xe9n\xe9raux"}),(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"font-medium text-gray-900",children:"V\xe9rification CIN obligatoire"}),(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Les propri\xe9taires doivent v\xe9rifier leur CIN pour publier"})]}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"font-medium text-gray-900",children:"Notifications par email"}),(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Envoyer des notifications par email aux utilisateurs"})]}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"font-medium text-gray-900",children:"Messages automatiques"}),(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Envoyer des messages automatiques pour les actions admin"})]}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),(0,I.jsxs)("section",{className:"border-b border-gray-200 pb-6",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Mode maintenance"}),(0,I.jsx)("p",{className:"text-gray-700 mb-4",children:"Activez le mode maintenance pour effectuer des mises \xe0 jour sans que les utilisateurs puissent acc\xe9der \xe0 la plateforme."}),(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"font-medium text-gray-900",children:"Activer le mode maintenance"}),(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"La plateforme sera inaccessible aux utilisateurs non administrateurs"})]}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer"}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),!1]}),(0,I.jsxs)("section",{className:"border-b border-gray-200 pb-6",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Configuration email"}),(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Serveur SMTP"}),(0,I.jsx)("input",{type:"text",className:"input-field",placeholder:"smtp.example.com",defaultValue:"smtp.gmail.com"})]}),(0,I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Port"}),(0,I.jsx)("input",{type:"number",className:"input-field",placeholder:"587",defaultValue:"587"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email exp\xe9diteur"}),(0,I.jsx)("input",{type:"email",className:"input-field",placeholder:"noreply@example.com"})]})]}),(0,I.jsx)("button",{className:"btn-primary",children:"Tester la configuration email"})]})]}),(0,I.jsxs)("section",{className:"border-b border-gray-200 pb-6",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Param\xe8tres de s\xe9curit\xe9"}),(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"font-medium text-gray-900",children:"Authentification \xe0 deux facteurs (2FA)"}),(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Recommand\xe9 pour les comptes administrateurs"})]}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"font-medium text-gray-900",children:"Limite de tentatives de connexion"}),(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Bloquer apr\xe8s 5 tentatives \xe9chou\xe9es"})]}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"font-medium text-gray-900",children:"Journalisation des actions admin"}),(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Enregistrer toutes les actions administratives"})]}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),(0,I.jsxs)("section",{className:"border-b border-gray-200 pb-6",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sauvegarde et restauration"}),(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,I.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,I.jsx)("div",{className:"flex-shrink-0",children:(0,I.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,I.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"Derni\xe8re sauvegarde"}),(0,I.jsx)("p",{className:"text-sm text-blue-700",children:"Il y a 2 heures - Taille: 45.2 MB"})]})]})}),(0,I.jsxs)("div",{className:"flex space-x-3",children:[(0,I.jsx)("button",{className:"btn-primary",children:"Cr\xe9er une sauvegarde maintenant"}),(0,I.jsx)("button",{className:"btn-secondary",children:"Restaurer depuis une sauvegarde"})]}),(0,I.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("p",{className:"font-medium text-gray-900",children:"Sauvegarde automatique"}),(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Sauvegarder la base de donn\xe9es quotidiennement"})]}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),(0,I.jsxs)("section",{className:"border-b border-gray-200 pb-6",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"API et int\xe9grations"}),(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cl\xe9 API Cloudinary"}),(0,I.jsxs)("div",{className:"flex space-x-2",children:[(0,I.jsx)("input",{type:"password",className:"input-field flex-1",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",defaultValue:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,I.jsx)("button",{className:"btn-secondary",children:"Afficher"})]}),(0,I.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Utilis\xe9e pour l'upload d'images"})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Webhook URL (optionnel)"}),(0,I.jsx)("input",{type:"url",className:"input-field",placeholder:"https://example.com/webhook"}),(0,I.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"URL pour recevoir les notifications d'\xe9v\xe9nements"})]})]})]}),(0,I.jsxs)("section",{children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statistiques de la plateforme"}),(0,I.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,I.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Utilisateurs totaux"}),(0,I.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.totalUsers})]}),(0,I.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Logements actifs"}),(0,I.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.totalProperties})]}),(0,I.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"Annonces actives"}),(0,I.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.totalAnnouncements})]}),(0,I.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,I.jsx)("p",{className:"text-sm text-gray-600",children:"V\xe9rifications en attente"}),(0,I.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.pendingVerifications})]})]})]})]})]})}),W.open&&W.user&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,I.jsxs)("div",{className:"bg-dark-100 rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,I.jsx)("h3",{className:"text-xl font-semibold text-dark-900",children:"Informations de l'utilisateur"}),(0,I.jsx)("button",{onClick:()=>Z({open:!1,user:null}),className:"text-dark-600 hover:text-dark-900",children:(0,I.jsx)(A.A,{className:"w-6 h-6"})})]}),(0,I.jsx)("div",{className:"space-y-4"})]})}),H.open&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,I.jsxs)("div",{className:"bg-dark-100 rounded-lg max-w-md w-full p-6",children:[(0,I.jsxs)("h3",{className:"text-lg font-semibold text-dark-900 mb-4",children:["Supprimer ","user"===H.type?"l'utilisateur":"announcement"===H.type?"l'annonce":"le logement"]}),(0,I.jsxs)("p",{className:"text-sm text-dark-700 mb-4",children:["Veuillez saisir la raison de la suppression ","user"===H.type||"announcement"===H.type?"(sera envoy\xe9e par email):":":"]}),(0,I.jsx)("textarea",{value:H.reason,onChange:e=>O((0,r.A)((0,r.A)({},H),{},{reason:e.target.value})),className:"input-field w-full mb-4",rows:4,placeholder:"Raison de la suppression..."}),(0,I.jsxs)("div",{className:"flex space-x-3 justify-end",children:[(0,I.jsx)("button",{onClick:()=>O({open:!1,type:null,id:null,reason:""}),className:"btn-secondary",children:"Annuler"}),(0,I.jsx)("button",{onClick:()=>{"user"===H.type?(async()=>{if(H.id&&H.reason)try{(await(0,n.apiJson)("/api/admin/user_delete/".concat(H.id),"DELETE")).success&&(C.Ay.success("Utilisateur supprim\xe9 avec succ\xe8s"),L(e=>e.filter(e=>e.id!==H.id)),O({open:!1,type:null,id:null,reason:""}))}catch(e){C.Ay.error("Erreur lors de la suppression")}else C.Ay.error("Veuillez saisir une raison")})():"announcement"===H.type?(async()=>{if(H.id&&H.reason)try{(await(0,n.apiJson)("/api/admin/announcement_delete_with_reason/".concat(H.id),"DELETE",{reason:H.reason})).success&&(C.Ay.success("Annonce supprim\xe9e avec succ\xe8s"),G(e=>e.filter(e=>e.id!==H.id)),O({open:!1,type:null,id:null,reason:""}))}catch(e){C.Ay.error("Erreur lors de la suppression")}else C.Ay.error("Veuillez saisir une raison")})():"property"===H.type&&(async()=>{if(H.id&&H.reason)try{const e=await(0,n.apiJson)("/api/properties/delete/".concat(H.id),"DELETE");e.success?(C.Ay.success("Logement supprim\xe9 avec succ\xe8s"),U(e=>e.filter(e=>e.id!==H.id)),O({open:!1,type:null,id:null,reason:""}),Y(null)):C.Ay.error(e.message||"Suppression impossible")}catch(e){C.Ay.error("Erreur lors de la suppression")}else C.Ay.error("Veuillez saisir une raison")})()},className:"btn-danger",children:"Supprimer"})]})]})}),se.open&&se.userId&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,I.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[(0,I.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rejeter la v\xe9rification CIN"}),(0,I.jsx)("p",{className:"text-sm text-gray-700 mb-4",children:"Veuillez saisir la raison du rejet (sera envoy\xe9e \xe0 l'utilisateur) :"}),(0,I.jsx)("textarea",{value:se.reason,onChange:e=>te((0,r.A)((0,r.A)({},se),{},{reason:e.target.value})),className:"input-field w-full mb-4",rows:4,placeholder:"Raison du rejet...",required:!0}),(0,I.jsxs)("div",{className:"flex space-x-3 justify-end",children:[(0,I.jsx)("button",{onClick:()=>te({open:!1,userId:null,reason:""}),className:"btn-secondary",children:"Annuler"}),(0,I.jsx)("button",{onClick:()=>{se.reason.trim()?ie(se.userId,!1,se.reason):C.Ay.error("Veuillez saisir une raison")},className:"btn-danger",children:"Rejeter"})]})]})})]})]})})]})}}}]);
//# sourceMappingURL=151.bebfb8b5.chunk.js.map