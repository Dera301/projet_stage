{"version":3,"file":"static/js/707.b9df41ed.chunk.js","mappings":"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","sources":["../node_modules/@heroicons/react/24/outline/esm/PhotoIcon.js","pages/CreateAnnouncementPage.tsx","../node_modules/@heroicons/react/24/outline/esm/IdentificationIcon.js","../node_modules/@heroicons/react/24/outline/esm/ClockIcon.js","../node_modules/@heroicons/react/24/outline/esm/XMarkIcon.js","../node_modules/@heroicons/react/24/outline/esm/ExclamationTriangleIcon.js"],"sourcesContent":["import * as React from \"react\";\nfunction PhotoIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PhotoIcon);\nexport default ForwardRef;","import React, { useRef, useState } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useAnnouncement, CreateAnnouncementData } from '../contexts/AnnouncementContext';\nimport { apiUpload } from '../config';\nimport toast from 'react-hot-toast';\nimport { PhotoIcon, IdentificationIcon, ExclamationTriangleIcon, XMarkIcon, ClockIcon } from '@heroicons/react/24/outline';\n\ninterface ImageFile {\n  file: File;\n  preview: string;\n  id: string;\n}\n\nconst uploadImageToServer = async (file: File): Promise<string> => {\n  try {\n    const formData = new FormData();\n    formData.append('image', file);\n    \n    const data = await apiUpload('/api/upload/image', formData);\n    \n    if (!data.success) {\n      throw new Error(data.message || 'Erreur lors de l\\'upload');\n    }\n    \n    return data.data?.url || data.data?.path || '';\n  } catch (error: any) {\n    console.error('Erreur upload:', error);\n    throw new Error(error.message || 'Erreur lors de l\\'upload');\n  }\n};\n\nconst CreateAnnouncementPage: React.FC = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const { createAnnouncement } = useAnnouncement();\n\n  const [content, setContent] = useState('');\n  const [contact, setContact] = useState('');\n  const [imageFiles, setImageFiles] = useState<ImageFile[]>([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  if (user.userType !== 'student') {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-md w-full text-center\">\n          <ExclamationTriangleIcon className=\"w-16 h-16 text-yellow-500 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Réservé aux étudiants</h2>\n          <p className=\"text-gray-600 mb-4\">Seuls les comptes étudiants peuvent publier une annonce de colocation.</p>\n          <button onClick={() => navigate('/dashboard')} className=\"w-full btn-secondary\">Retour</button>\n        </div>\n      </div>\n    );\n  }\n\n  const isCinVerified = user?.cinVerified || user?.cin_verified;\n  const isCinPending = user?.cinPending || user?.cin_verification_requested_at;\n\n  // Bloquer si l'étudiant n'est PAS vérifié ET n'est PAS en attente\n  if (!isCinVerified && !isCinPending) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-md w-full text-center\">\n          <ExclamationTriangleIcon className=\"w-16 h-16 text-yellow-500 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Vérification Requise</h2>\n          <p className=\"text-gray-600 mb-4\">Vous devez vérifier votre CIN avant de pouvoir publier des annonces.</p>\n          <div className=\"space-y-3\">\n            <Link to=\"/cin-verification\" className=\"w-full btn-primary flex items-center justify-center space-x-2\">\n              <IdentificationIcon className=\"w-5 h-5\" />\n              <span>Vérifier mon CIN</span>\n            </Link>\n            <button onClick={() => navigate('/dashboard')} className=\"w-full btn-secondary\">Retour au tableau de bord</button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  \n  // Afficher un message \"en attente\"\n  if (!isCinVerified && isCinPending) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-md w-full text-center\">\n          <ClockIcon className=\"w-16 h-16 text-blue-500 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\n            Vérification en cours\n          </h2>\n          <p className=\"text-gray-600 mb-4\">\n            Votre CIN est en cours de validation. Vous pourrez publier une annonce dès qu'elle sera approuvée.\n          </p>\n          <button\n            onClick={() => navigate('/dashboard')}\n            className=\"w-full btn-secondary\"\n          >\n            Retour au tableau de bord\n          </button>\n        </div>\n      </div>\n    );\n  }\n  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files) return;\n    const newImages: ImageFile[] = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      if (!file.type.startsWith('image/')) { toast.error(`${file.name} n'est pas une image valide`); continue; }\n      if (file.size > 5 * 1024 * 1024) { toast.error(`${file.name} est trop volumineux (max 5MB)`); continue; }\n      if (imageFiles.length + newImages.length >= 6) { toast.error('Maximum 6 images'); break; }\n      newImages.push({ file, preview: URL.createObjectURL(file), id: Math.random().toString(36).slice(2) });\n    }\n    if (newImages.length > 0) {\n      setImageFiles(prev => [...prev, ...newImages]);\n      toast.success(`${newImages.length} image(s) ajoutée(s)`);\n    }\n    if (fileInputRef.current) fileInputRef.current.value = '';\n  };\n\n  const removeImage = (index: number) => {\n    URL.revokeObjectURL(imageFiles[index].preview);\n    setImageFiles(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const uploadAllImages = async (): Promise<string[]> => {\n    if (imageFiles.length === 0) return [];\n    setIsUploading(true);\n    try {\n      const files = imageFiles.map(i => i.file);\n      const urls = await Promise.all(files.map(uploadImageToServer));\n      return urls;\n    } finally { setIsUploading(false); }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!content.trim()) { toast.error('Le texte de votre annonce est requis'); return; }\n    try {\n      toast.loading('Publication en cours...');\n      const images = await uploadAllImages();\n      toast.dismiss();\n      const payload: CreateAnnouncementData = { content: content.trim(), images, contact: contact.trim() || undefined };\n      await createAnnouncement(payload);\n      imageFiles.forEach(i => URL.revokeObjectURL(i.preview));\n      navigate('/announcements');\n    } catch (err: any) {\n      toast.dismiss();\n      toast.error(err.message || 'Erreur lors de la publication');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Publier une annonce de colocation</h1>\n          <p className=\"text-gray-600\">Partagez ce que vous recherchez (quartier, budget, préférences) et ajoutez des images si besoin.</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Texte de l'annonce *</label>\n            <textarea value={content} onChange={e => setContent(e.target.value)} rows={5} className=\"input-field\" placeholder=\"Ex: Étudiant en info, je cherche une colocation à Isoraka, budget 300 000 Ar, non fumeur...\" required />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Contact (optionnel)</label>\n            <input value={contact} onChange={e => setContact(e.target.value)} type=\"text\" className=\"input-field\" placeholder=\"Téléphone, email, etc.\" />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Images (max 6)</label>\n            <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n              <input ref={fileInputRef} type=\"file\" accept=\"image/*\" multiple onChange={handleImageUpload} className=\"hidden\" id=\"announcementImages\" />\n              <label htmlFor=\"announcementImages\" className=\"cursor-pointer inline-flex items-center space-x-2 btn-secondary\">\n                <PhotoIcon className=\"w-5 h-5\" />\n                <span>Ajouter des images</span>\n              </label>\n              {imageFiles.length > 0 && (\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3 mt-4\">\n                  {imageFiles.map((img, idx) => (\n                    <div key={img.id} className=\"relative\">\n                      <img src={img.preview} alt=\"preview\" className=\"w-full h-32 object-cover rounded-lg\" />\n                      <button type=\"button\" onClick={() => removeImage(idx)} className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600\">\n                        <XMarkIcon className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex space-x-3\">\n            <button type=\"button\" onClick={() => navigate('/announcements')} className=\"btn-secondary\">Annuler</button>\n            <button type=\"submit\" disabled={isUploading || !content.trim()} className=\"btn-primary\">Publier</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateAnnouncementPage;\n","import * as React from \"react\";\nfunction IdentificationIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(IdentificationIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ClockIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ClockIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 18 18 6M6 6l12 12\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XMarkIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ExclamationTriangleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ExclamationTriangleIcon);\nexport default ForwardRef;"],"names":["PhotoIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","uploadImageToServer","async","_data$data","_data$data2","formData","FormData","append","file","data","apiUpload","success","Error","message","url","path","error","console","CreateAnnouncementPage","user","useAuth","navigate","useNavigate","createAnnouncement","useAnnouncement","content","setContent","useState","contact","setContact","imageFiles","setImageFiles","isUploading","setIsUploading","fileInputRef","useRef","_jsx","className","children","userType","_jsxs","ExclamationTriangleIcon","onClick","isCinVerified","cinVerified","cin_verified","isCinPending","cinPending","cin_verification_requested_at","Link","to","IdentificationIcon","ClockIcon","onSubmit","e","preventDefault","trim","toast","loading","images","length","files","map","i","Promise","all","uploadAllImages","dismiss","payload","undefined","forEach","URL","revokeObjectURL","preview","err","value","onChange","target","rows","placeholder","required","type","accept","multiple","newImages","startsWith","size","concat","name","push","createObjectURL","Math","random","toString","slice","prev","current","htmlFor","img","idx","src","alt","removeImage","index","filter","_","XMarkIcon","disabled"],"sourceRoot":""}