"use strict";(self.webpackChunkcolocation_antananarivo=self.webpackChunkcolocation_antananarivo||[]).push([[686],{589:(e,t,r)=>{r.d(t,{A:()=>n,R:()=>l});var s=r(5043),a=r(9741),i=r(3216);const l=()=>{const{user:e}=(0,a.A)(),t=(0,i.Zp)(),[r,l]=(0,s.useState)(!1),n=(null===e||void 0===e?void 0:e.cinVerified)||(null===e||void 0===e?void 0:e.cin_verified)||!1,o=(null===e||void 0===e?void 0:e.cinPending)||!(null===e||void 0===e||!e.cin_verification_requested_at),c="owner"===(null===e||void 0===e?void 0:e.userType)&&!n&&!o,d=(0,s.useCallback)(r=>(r&&r.preventDefault(),e?!c||(l(!0),!1):(t("/login",{state:{from:window.location.pathname}}),!1)),[c,e,t]);return{isVerified:n,isPending:o,requiresVerification:c,showVerificationModal:r,setShowVerificationModal:l,checkVerification:d,onClickHandler:(e,r)=>{d(e)&&t(r)}}},n=l},2556:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const n=a.forwardRef(l)},2683:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const n=a.forwardRef(l)},2692:(e,t,r)=>{r.d(t,{A:()=>d});var s=r(5043),a=r(7988),i=r(7591),l=r(4558),n=r(2339),o=r(9741),c=r(579);const d=e=>{let{isOpen:t,onClose:r,propertyId:d,ownerId:m,propertyTitle:u,appointment:x,onUpdate:h}=e;const{user:p}=(0,o.A)(),[g,f]=(0,s.useState)(""),[v,b]=(0,s.useState)(""),[j,y]=(0,s.useState)(""),[w,N]=(0,s.useState)(!1),[k,A]=(0,s.useState)([]),[C,E]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t&&p&&(async()=>{if(p){E(!0);try{const e=await(0,l.apiGet)("/api/appointments/get_all");e.success&&A(e.data||[])}catch(e){console.error("Erreur lors du chargement des rendez-vous existants")}finally{E(!1)}}})()},[t,p]),(0,s.useEffect)(()=>{if(x){const e=new Date(x.appointmentDate);f(e.toISOString().split("T")[0]),b(e.toTimeString().slice(0,5)),y(x.message)}else f(""),b(""),y("")},[x]);const L=(e,t)=>{const r=new Date("".concat(e,"T").concat(t,":00")),s=new Date;return k.some(e=>{if(e.id===(null===x||void 0===x?void 0:x.id))return!1;const t=new Date(e.appointmentDate);if(t.getTime()<s.getTime())return!1;if("completed"===e.status)return!1;return Math.abs(r.getTime()-t.getTime())/36e5<2&&"cancelled"!==e.status})};if(!t)return null;const I=(new Date).toISOString().split("T")[0],M=new Date;M.setDate(M.getDate()+30);const S=M.toISOString().split("T")[0];return(0,c.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,c.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,c.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:x?"Modifier la visite":"Planifier une visite"}),(0,c.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,c.jsx)(i.A,{className:"w-6 h-6"})})]}),(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g&&v)if(p)if(L(g,v))n.Ay.error("Ce cr\xe9neau horaire est d\xe9j\xe0 r\xe9serv\xe9. Veuillez choisir un autre horaire.");else{N(!0);try{const e="".concat(g,"T").concat(v,":00");if(x&&h)await h({appointmentDate:e,message:j||'Je souhaite visiter le logement "'.concat(u,'"')});else{const t=await(0,l.apiJson)("/api/appointments/create","POST",{propertyId:d,appointmentDate:e,message:j||'Je souhaite visiter le logement "'.concat(u,'"')});t.success?(n.Ay.success("Rendez-vous planifi\xe9 avec succ\xe8s !"),r()):n.Ay.error(t.message||"Erreur lors de la planification")}}catch(t){console.error("Erreur:",t),n.Ay.error("Erreur lors de la planification du rendez-vous")}finally{N(!1)}}else n.Ay.error("Veuillez vous connecter pour planifier un rendez-vous");else n.Ay.error("Veuillez s\xe9lectionner une date et une heure")},className:"p-6 space-y-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logement"}),(0,c.jsx)("p",{className:"text-gray-900 font-medium",children:u})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de visite *"}),(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(a.A,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),(0,c.jsx)("input",{type:"date",id:"date",required:!0,min:I,max:S,value:g,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure de visite *"}),C?(0,c.jsx)("div",{className:"flex justify-center py-4",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"})}):(0,c.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["08:00","09:00","10:00","11:00","14:00","15:00","16:00","17:00"].map(e=>{const t=!!g&&L(g,e);return(0,c.jsxs)("button",{type:"button",onClick:()=>!t&&b(e),disabled:t,className:"p-3 border rounded-lg text-sm font-medium transition-colors ".concat(v===e?"border-primary-500 bg-primary-50 text-primary-700":t?"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed":"border-gray-300 text-gray-700 hover:border-primary-400"),title:t?"Cr\xe9neau indisponible":"",children:[e,t&&(0,c.jsx)("div",{className:"text-xs text-red-500 mt-1",children:"Indisponible"})]},e)})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:"Message au propri\xe9taire (optionnel)"}),(0,c.jsx)("textarea",{id:"message",rows:4,value:j,onChange:e=>y(e.target.value),placeholder:"Bonjour, je souhaite visiter votre logement...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,c.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,c.jsx)("button",{type:"button",onClick:r,className:"flex-1 btn-secondary",children:"Annuler"}),(0,c.jsx)("button",{type:"submit",disabled:w||!g||!v||C,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:w?x?"Modification...":"Planification...":x?"Modifier":"Confirmer"})]})]})]})})}},3063:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const n=a.forwardRef(l)},4111:(e,t,r)=>{r.d(t,{A:()=>n});r(5043);var s=r(2556),a=r(7591),i=r(5475),l=r(579);const n=e=>{let{isOpen:t,onClose:r,showBackButton:n=!0,backButtonText:o="Retour",onBackClick:c}=e;return t?(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative",children:[(0,l.jsx)("button",{onClick:()=>{r()},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,l.jsx)(a.A,{className:"h-6 w-6"})}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-yellow-100 mb-4",children:(0,l.jsx)(s.A,{className:"h-8 w-8 text-yellow-600"})}),(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"V\xe9rification Requise"}),(0,l.jsx)("p",{className:"text-gray-600 mb-6",children:"Vous devez v\xe9rifier votre CIN avant de pouvoir acc\xe9der \xe0 cette fonctionnalit\xe9."}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(i.N_,{to:"/cin-verification",onClick:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"V\xe9rifier mon CIN"}),n&&(0,l.jsx)("button",{type:"button",onClick:()=>{c&&c(),r()},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:o})]})]})]})}):null}},4538:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const n=a.forwardRef(l)},5442:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const n=a.forwardRef(l)},5501:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const n=a.forwardRef(l)},5590:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const n=a.forwardRef(l)},6266:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const n=a.forwardRef(l)},6838:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const n=a.forwardRef(l)},7459:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const n=a.forwardRef(l)},7591:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const n=a.forwardRef(l)},7988:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const n=a.forwardRef(l)},9686:(e,t,r)=>{r.r(t),r.d(t,{default:()=>L});var s=r(5043),a=r(3216),i=r(5475),l=r(129),n=r(8927),o=r(9741),c=r(589),d=r(4111),m=r(5442),u=r(7988),x=r(3063),h=r(4538),p=r(2683),g=r(6266),f=r(5501),v=r(7459),b=r(9850),j=r(9897),y=r(6838),w=r(5590),N=r(7591),k=r(2339),A=r(2692),C=r(4558),E=r(579);const L=()=>{var e,t,r,L,I,M,S,V,T,R;const{id:O}=(0,a.g)(),{properties:B,fetchPropertyById:z}=(0,l.N)(),{sendMessage:D}=(0,n.J)(),{user:Z}=(0,o.A)(),{showVerificationModal:W,setShowVerificationModal:_,checkVerification:q}=(0,c.R)(),[P,F]=(0,s.useState)(null),[G,H]=(0,s.useState)(!0),[J,U]=(0,s.useState)(0),[Q,K]=(0,s.useState)(!1),[X,Y]=(0,s.useState)(!1),[$,ee]=(0,s.useState)(""),[te,re]=(0,s.useState)(!1),[se,ae]=(0,s.useState)(!1),[ie,le]=(0,s.useState)(!1),ne=Z&&P&&String(P.ownerId)===String(Z.id),oe=s.useMemo(()=>P?B.filter(e=>e.id!==O&&"apartment"===e.propertyType).slice(0,5):[],[B,O,P]);if((0,s.useEffect)(()=>{(async()=>{if(O){H(!0);try{const e=B.find(e=>e.id===O);if(e)F(e);else{const e=await z(O);F(e)}}catch(e){console.error("Erreur lors du chargement de la propri\xe9t\xe9:",e),k.Ay.error("Erreur lors du chargement du logement")}finally{H(!1)}}})()},[O,B,z]),G)return(0,E.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,E.jsxs)("div",{className:"text-center",children:[(0,E.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,E.jsx)("p",{className:"text-gray-600",children:"Chargement du logement..."})]})});if(!P)return(0,E.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,E.jsxs)("div",{className:"text-center",children:[(0,E.jsx)(f.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,E.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Logement non trouv\xe9"}),(0,E.jsx)("p",{className:"text-gray-600 mb-4",children:"Le logement que vous recherchez n'existe pas."}),(0,E.jsx)(i.N_,{to:"/properties",className:"btn-primary",children:"Voir tous les logements"})]})});return(0,E.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,E.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,E.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)(i.N_,{to:"/properties",className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,E.jsx)(m.A,{className:"w-5 h-5 mr-2"}),"Retour aux logements"]}),(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsx)("button",{onClick:()=>{K(!Q),k.Ay.success(Q?"Retir\xe9 des favoris":"Ajout\xe9 aux favoris")},className:"p-2 rounded-lg transition-colors ".concat(Q?"text-red-500 bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-red-50"),children:(0,E.jsx)(g.A,{className:"w-5 h-5"})}),(0,E.jsx)("button",{onClick:()=>{navigator.share?navigator.share({title:P.title,text:P.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),k.Ay.success("Lien copi\xe9 dans le presse-papiers"))},className:"p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors",children:(0,E.jsx)(j.A,{className:"w-5 h-5"})})]})]})})}),(0,E.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,E.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,E.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,E.jsx)("div",{className:"aspect-w-16 aspect-h-9",children:(0,E.jsx)("img",{src:(0,C.VG)(null===(e=P.images)||void 0===e?void 0:e[J]),alt:P.title,className:"w-full h-96 object-cover",onError:e=>{e.currentTarget.src="/api/placeholder/800/600"}})}),P.images&&P.images.length>1&&(0,E.jsx)("div",{className:"p-4",children:(0,E.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:P.images.map((e,t)=>(0,E.jsx)("button",{onClick:()=>U(t),className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 ".concat(J===t?"border-primary-500":"border-gray-200 hover:border-gray-300"),children:(0,E.jsx)("img",{src:(0,C.VG)(e),alt:"".concat(P.title," ").concat(t+1),className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/api/placeholder/80/80"}})},t))})})]}),(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,E.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:P.title}),(0,E.jsxs)("div",{className:"flex items-center text-gray-600 mb-2",children:[(0,E.jsx)(v.A,{className:"w-5 h-5 mr-2"}),(0,E.jsx)("span",{children:P.address})]}),P.latitude&&P.longitude&&(0,E.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:(0,E.jsxs)("span",{children:["Lat: ",P.latitude.toFixed(6)," \u2022 Lng: ",P.longitude.toFixed(6)]})}),(0,E.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,E.jsx)("span",{className:"badge badge-primary",children:"apartment"===P.propertyType?"Appartement":"house"===P.propertyType?"Maison":"Studio"}),(0,E.jsx)("span",{className:"badge ".concat(P.isAvailable?"badge-success":"badge-warning"),children:P.isAvailable?"Disponible":"Occup\xe9"}),P.latitude&&P.longitude&&(0,E.jsx)("span",{className:"badge badge-success",title:"Coordonn\xe9es disponibles",children:"Coordonn\xe9es v\xe9rifi\xe9es"})]})]}),(0,E.jsxs)("div",{className:"text-right",children:[(0,E.jsxs)("div",{className:"text-3xl font-bold text-primary-600",children:[null===(t=P.price)||void 0===t?void 0:t.toLocaleString()," Ar"]}),(0,E.jsx)("div",{className:"text-gray-500",children:"par mois"})]})]}),(0,E.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,E.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,E.jsx)(w.A,{className:"w-6 h-6 text-primary-600 mx-auto mb-2"}),(0,E.jsx)("div",{className:"text-sm text-gray-600",children:"Chambres"}),(0,E.jsxs)("div",{className:"font-semibold",children:[P.availableRooms,"/",P.totalRooms]})]}),(0,E.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,E.jsx)(p.A,{className:"w-6 h-6 text-primary-600 mx-auto mb-2"}),(0,E.jsx)("div",{className:"text-sm text-gray-600",children:"Caution"}),(0,E.jsxs)("div",{className:"font-semibold",children:[null===(r=P.deposit)||void 0===r?void 0:r.toLocaleString()," Ar"]})]}),(0,E.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,E.jsx)(f.A,{className:"w-6 h-6 text-primary-600 mx-auto mb-2"}),(0,E.jsx)("div",{className:"text-sm text-gray-600",children:"Type"}),(0,E.jsx)("div",{className:"font-semibold",children:"apartment"===P.propertyType?"Appartement":"house"===P.propertyType?"Maison":"Studio"})]}),(0,E.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition",onClick:()=>re(!te),title:"Voir sur la carte",children:[(0,E.jsx)(v.A,{className:"w-6 h-6 text-primary-600 mx-auto mb-2"}),(0,E.jsx)("div",{className:"text-sm text-gray-600",children:"Quartier"}),(0,E.jsx)("div",{className:"font-semibold",children:P.district}),(0,E.jsx)("div",{className:"text-xs text-primary-600 mt-1 underline",children:"Voir sur la carte"})]})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Description"}),(0,E.jsx)("p",{className:"text-gray-600 leading-relaxed",children:P.description})]})]}),(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,E.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\xc9quipements"}),(0,E.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[null===(L=P.amenities)||void 0===L?void 0:L.map((e,t)=>(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)(h.A,{className:"w-5 h-5 text-green-500 mr-2"}),(0,E.jsx)("span",{className:"text-gray-700",children:e})]},t)),(!P.amenities||0===P.amenities.length)&&(0,E.jsx)("p",{className:"text-gray-500 col-span-3",children:"Aucun \xe9quipement list\xe9"})]})]}),te&&(0,E.jsxs)("div",{className:"my-6",children:[(0,E.jsx)("h4",{className:"text-md font-semibold mb-2",children:"Emplacement sur la carte"}),(0,E.jsxs)("div",{className:"rounded-lg overflow-hidden border border-gray-200",children:[(0,E.jsxs)("div",{className:"relative w-full h-[300px]",children:[(0,E.jsx)("iframe",{width:"100%",height:"300",className:"absolute inset-0 w-full h-full",style:{border:0},loading:"lazy",allowFullScreen:!0,title:"Carte montrant la localisation de ".concat(P.title||"la propri\xe9t\xe9"," \xe0 ").concat(P.address),src:P.latitude&&P.longitude?"https://www.google.com/maps?q=".concat(P.latitude,",").concat(P.longitude,"&z=16&output=embed"):"https://www.google.com/maps?q=".concat(encodeURIComponent(P.address),"&output=embed")}),P.latitude&&P.longitude&&(0,E.jsx)("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:(0,E.jsxs)("div",{className:"flex flex-col items-center",children:[(0,E.jsx)("div",{className:"w-9 h-9 rounded-full bg-blue-600 flex items-center justify-center shadow-lg border-2 border-white",children:(0,E.jsx)(f.A,{className:"w-4 h-4 text-white"})}),(0,E.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-1 opacity-80"})]})})]}),P.latitude&&P.longitude&&(0,E.jsxs)("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-600 flex justify-between",children:[(0,E.jsxs)("span",{children:["Latitude : ",P.latitude.toFixed(6)]}),(0,E.jsxs)("span",{children:["Longitude : ",P.longitude.toFixed(6)]})]})]})]})]}),(0,E.jsxs)("div",{className:"space-y-6",children:[(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,E.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Autres appartements"}),0===oe.length?(0,E.jsx)("p",{className:"text-gray-500 text-sm",children:"Aucun autre appartement disponible."}):(0,E.jsx)("div",{className:"space-y-3",children:oe.map(e=>{var t;return(0,E.jsxs)(i.N_,{to:"/properties/".concat(e.id),className:"flex items-center p-3 border border-gray-200 rounded-lg hover:border-primary-300 hover:bg-primary-50 transition-colors",children:[(0,E.jsx)("div",{className:"w-14 h-14 rounded-md overflow-hidden bg-gray-100 mr-3 flex-shrink-0",children:(0,E.jsx)("img",{src:(0,C.VG)(null===(t=e.images)||void 0===t?void 0:t[0]),alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.currentTarget.src="/api/placeholder/80/80"}})}),(0,E.jsxs)("div",{className:"min-w-0",children:[(0,E.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.title}),(0,E.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.address}),(0,E.jsxs)("p",{className:"text-sm text-primary-600 font-semibold",children:[e.price.toLocaleString()," Ar"]})]})]},e.id)})})]}),(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,E.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Propri\xe9taire"}),(0,E.jsxs)("div",{className:"flex items-center mb-4",children:[(0,E.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center mr-3",children:(0,E.jsx)("span",{className:"text-primary-600 font-medium text-lg",children:(null===(I=P.owner)||void 0===I||null===(M=I.firstName)||void 0===M?void 0:M[0])||"U"})}),(0,E.jsxs)("div",{children:[(0,E.jsxs)("h4",{className:"font-semibold text-gray-900",children:[null===(S=P.owner)||void 0===S?void 0:S.firstName," ",null===(V=P.owner)||void 0===V?void 0:V.lastName]}),(0,E.jsxs)("div",{className:"flex items-center",children:[[...Array(5)].map((e,t)=>(0,E.jsx)(y.A,{className:"w-4 h-4 text-yellow-400 fill-current"},t)),(0,E.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"(4.8)"})]})]})]}),(null===(T=P.owner)||void 0===T?void 0:T.is_verified)&&(0,E.jsxs)("div",{className:"flex items-center text-green-600 mb-4",children:[(0,E.jsx)(h.A,{className:"w-4 h-4 mr-1"}),(0,E.jsx)("span",{className:"text-sm",children:"Propri\xe9taire v\xe9rifi\xe9"})]}),!ne&&(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("button",{onClick:e=>{e.preventDefault(),Z?q(e)&&Y(!0):k.Ay.error("Veuillez vous connecter pour contacter le propri\xe9taire")},className:"w-full btn-primary flex items-center justify-center space-x-2",children:[(0,E.jsx)(x.A,{className:"w-4 h-4"}),(0,E.jsx)("span",{children:"Contacter"})]}),(0,E.jsxs)("button",{onClick:()=>le(!0),className:"w-full btn-secondary flex items-center justify-center space-x-2",children:[(0,E.jsx)(b.A,{className:"w-4 h-4"}),(0,E.jsx)("span",{children:"Appeler"})]}),(0,E.jsxs)("button",{onClick:e=>{e.preventDefault(),q(e)&&ae(!0)},className:"w-full btn-secondary flex items-center justify-center space-x-2",children:[(0,E.jsx)(u.A,{className:"w-4 h-4"}),(0,E.jsx)("span",{children:"Planifier une visite"})]})]}),ne&&(0,E.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg border border-green-200",children:[(0,E.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,E.jsx)(h.A,{className:"w-5 h-5 text-green-600 mr-2"}),(0,E.jsx)("p",{className:"text-green-800 font-semibold",children:"C'est votre propri\xe9t\xe9"})]}),(0,E.jsx)("p",{className:"text-gray-600 mb-4 text-sm",children:"Vous pouvez modifier les informations de cette propri\xe9t\xe9"}),(0,E.jsx)(i.N_,{to:"/edit-property/".concat(P.id),className:"btn-primary w-full",children:"Modifier la propri\xe9t\xe9"})]})]}),ie&&(0,E.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,E.jsxs)("div",{className:"bg-white rounded-lg max-w-sm w-full p-6",children:[(0,E.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,E.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Num\xe9ro de t\xe9l\xe9phone"}),(0,E.jsx)("button",{onClick:()=>le(!1),className:"text-gray-400 hover:text-gray-600",children:(0,E.jsx)(N.A,{className:"w-5 h-5"})})]}),(0,E.jsxs)("div",{className:"text-center",children:[(0,E.jsx)(b.A,{className:"w-12 h-12 text-primary-600 mx-auto mb-4"}),(0,E.jsx)("p",{className:"text-gray-600 mb-2",children:"Num\xe9ro du propri\xe9taire :"}),(0,E.jsx)("p",{className:"text-2xl font-bold text-primary-600 mb-6",children:(null===(R=P.owner)||void 0===R?void 0:R.phone)||"Non disponible"}),(0,E.jsx)("button",{onClick:()=>le(!1),className:"btn-primary w-full",children:"Fermer"})]})]})}),X&&(0,E.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,E.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Envoyer un message"}),(0,E.jsxs)("div",{className:"space-y-4",children:[(0,E.jsx)("textarea",{value:$,onChange:e=>ee(e.target.value),placeholder:"Bonjour, je suis int\xe9ress\xe9(e) par votre logement...",rows:4,className:"w-full input-field"}),(0,E.jsxs)("div",{className:"flex space-x-2",children:[(0,E.jsx)("button",{onClick:async()=>{if($.trim())try{await D(P.ownerId,$),ee(""),Y(!1)}catch(e){k.Ay.error("Erreur lors de l'envoi du message")}else k.Ay.error("Veuillez saisir un message")},className:"flex-1 btn-primary",children:"Envoyer"}),(0,E.jsx)("button",{onClick:()=>Y(!1),className:"flex-1 btn-secondary",children:"Annuler"})]})]})]}),(0,E.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6",children:[(0,E.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Conseils de s\xe9curit\xe9"}),(0,E.jsxs)("ul",{className:"space-y-2 text-sm text-blue-800",children:[(0,E.jsx)("li",{children:"\u2022 Visitez toujours le logement avant de signer"}),(0,E.jsx)("li",{children:"\u2022 V\xe9rifiez l'identit\xe9 du propri\xe9taire"}),(0,E.jsx)("li",{children:"\u2022 Ne payez jamais d'avance sans contrat"}),(0,E.jsx)("li",{children:"\u2022 Utilisez notre messagerie s\xe9curis\xe9e"})]})]})]})]})}),P&&(0,E.jsx)(A.A,{isOpen:se,onClose:()=>ae(!1),propertyId:P.id,ownerId:P.ownerId,propertyTitle:P.title}),(0,E.jsx)(d.A,{isOpen:W,onClose:()=>_(!1),backButtonText:"Retour au logement"})]})}},9850:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const n=a.forwardRef(l)},9897:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(3986),a=r(5043);const i=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,n=(0,s.A)(e,i);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},n),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const n=a.forwardRef(l)}}]);
//# sourceMappingURL=686.f5327a28.chunk.js.map