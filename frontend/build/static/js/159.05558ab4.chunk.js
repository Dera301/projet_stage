"use strict";(self.webpackChunkcolocation_antananarivo=self.webpackChunkcolocation_antananarivo||[]).push([[159],{343:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(3986),a=r(5043);const s=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,i=(0,n.A)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?a.createElement("title",{id:o},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const i=a.forwardRef(o)},589:(e,t,r)=>{r.d(t,{A:()=>i,R:()=>o});var n=r(5043),a=r(9741),s=r(3216);const o=()=>{const{user:e}=(0,a.A)(),t=(0,s.Zp)(),[r,o]=(0,n.useState)(!1),i=(null===e||void 0===e?void 0:e.cinVerified)||(null===e||void 0===e?void 0:e.cin_verified)||!1,l=(null===e||void 0===e?void 0:e.cinPending)||!(null===e||void 0===e||!e.cin_verification_requested_at),c="owner"===(null===e||void 0===e?void 0:e.userType)&&!i&&!l,d=(0,n.useCallback)(r=>(r&&r.preventDefault(),e?!c||(o(!0),!1):(t("/login",{state:{from:window.location.pathname}}),!1)),[c,e,t]);return{isVerified:i,isPending:l,requiresVerification:c,showVerificationModal:r,setShowVerificationModal:o,checkVerification:d,onClickHandler:(e,r)=>{d(e)&&t(r)}}},i=o},2556:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(3986),a=r(5043);const s=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,i=(0,n.A)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?a.createElement("title",{id:o},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const i=a.forwardRef(o)},3063:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(3986),a=r(5043);const s=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,i=(0,n.A)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?a.createElement("title",{id:o},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const i=a.forwardRef(o)},4111:(e,t,r)=>{r.d(t,{A:()=>i});r(5043);var n=r(2556),a=r(7591),s=r(5475),o=r(579);const i=e=>{let{isOpen:t,onClose:r,showBackButton:i=!0,backButtonText:l="Retour",onBackClick:c}=e;return t?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative",children:[(0,o.jsx)("button",{onClick:()=>{r()},className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700",children:(0,o.jsx)(a.A,{className:"h-6 w-6"})}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-yellow-100 mb-4",children:(0,o.jsx)(n.A,{className:"h-8 w-8 text-yellow-600"})}),(0,o.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"V\xe9rification Requise"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"Vous devez v\xe9rifier votre CIN avant de pouvoir acc\xe9der \xe0 cette fonctionnalit\xe9."}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)(s.N_,{to:"/cin-verification",onClick:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"V\xe9rifier mon CIN"}),i&&(0,o.jsx)("button",{type:"button",onClick:()=>{c&&c(),r()},className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:l})]})]})]})}):null}},4129:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(3986),a=r(5043);const s=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,i=(0,n.A)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?a.createElement("title",{id:o},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const i=a.forwardRef(o)},7591:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(3986),a=r(5043);const s=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,i=(0,n.A)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?a.createElement("title",{id:o},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const i=a.forwardRef(o)},8662:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(3986),a=r(5043);const s=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,i=(0,n.A)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?a.createElement("title",{id:o},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const i=a.forwardRef(o)},9159:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var n=r(5043),a=r(3216),s=r(5475),o=r(9741),i=r(8927),l=r(4111),c=r(589),d=r(343),m=r(9265),x=r(3063),u=r(8662),h=r(4129),p=r(7591),g=r(579);const b=()=>{const{user:e,logout:t}=(0,o.A)(),{conversations:r}=(0,i.J)(),b=(0,a.Zp)(),f=(0,a.zy)(),[y,v]=(0,n.useState)(!1),[j,w]=(0,n.useState)(0),{showVerificationModal:N,setShowVerificationModal:k,checkVerification:C,requiresVerification:A,onClickHandler:_}=(0,c.R)(),E=(0,n.useCallback)((e,t)=>A?(e.preventDefault(),k(!0),!1):(b(t),!0),[A,b,k]),[I,M]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!e||I)return void w(0);const t=r.reduce((t,r)=>{const n=r.lastMessage;if(!n)return t;const a=String(n.senderId)!==String(e.id),s=!n.isRead;return t+(a&&s?1:0)},0);w(t)},[r,e,I]),(0,n.useEffect)(()=>{if(!e)return;r.some(t=>{const r=t.lastMessage;if(!r)return!1;return String(r.senderId)!==String(e.id)&&!r.isRead})&&M(!1)},[r,e]);const V=()=>{t(),b("/")},L=e=>f.pathname===e,R=e=>0===e?null:e>99?"99+":e.toString(),B=e=>"".concat("px-3 py-2 rounded-md text-sm font-medium transition-colors"," ").concat(L(e)?"text-primary-600 bg-primary-50 border-b-2 border-primary-600":"text-gray-700 hover:text-primary-600 hover:bg-gray-50");return e&&"admin"===e.userType?null:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.A,{isOpen:N,onClose:()=>{k(!1)},backButtonText:"Fermer"}),(0,g.jsx)("nav",{className:"bg-white shadow-lg border-b border-gray-200 fixed top-0 left-0 right-0 z-50 w-full",children:(0,g.jsxs)("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-6 w-full",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center h-16 sm:h-20 w-full",children:[(0,g.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,g.jsx)(s.N_,{to:"/",className:"flex items-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 rounded-md",children:(0,g.jsx)("img",{src:"/logo_colo.svg",alt:"ColocAntananarivo",className:"h-12 w-auto sm:h-14 md:h-16 transition-all duration-200",style:{maxWidth:"min(180px, 30vw)",height:"auto",objectFit:"contain"}})})}),(0,g.jsxs)("div",{className:"hidden md:flex items-center space-x-1",children:[(0,g.jsx)(s.N_,{to:"/",className:B("/"),children:"Accueil"}),e&&(0,g.jsx)(s.N_,{to:"/dashboard",className:B("/dashboard"),onClick:e=>{A&&(e.preventDefault(),k(!0))},children:"Dashboard"}),(0,g.jsx)(s.N_,{to:"/logements",className:B("/logements"),children:"Logements"}),(0,g.jsx)(s.N_,{to:"/announcements",className:B("/announcements"),children:"Annonces"}),(0,g.jsx)(s.N_,{to:"/about",className:B("/about"),children:"\xc0 propos"}),(0,g.jsx)(s.N_,{to:"/contact",className:B("/contact"),children:"Contact"})]}),(0,g.jsx)("div",{className:"hidden md:flex items-center space-x-3",children:e?(0,g.jsxs)(g.Fragment,{children:["owner"===e.userType&&(0,g.jsxs)("button",{onClick:e=>{e.preventDefault(),C(e)&&b("/create-property")},className:"btn-primary flex items-center space-x-2",children:[(0,g.jsx)(u.A,{className:"w-4 h-4"}),(0,g.jsx)("span",{children:"Publier"})]}),"student"===e.userType&&(0,g.jsxs)("button",{onClick:e=>{e.preventDefault(),C(e)&&b("/create-announcement")},className:"btn-primary flex items-center space-x-2",children:[(0,g.jsx)(u.A,{className:"w-4 h-4"}),(0,g.jsx)("span",{children:"Publier une annonce"})]}),(0,g.jsxs)("button",{onClick:e=>{e.preventDefault(),C(e)&&b("/messages")},className:"relative p-2 text-gray-600 hover:text-primary-600 rounded-full hover:bg-gray-100",children:[(0,g.jsx)(x.A,{className:"h-6 w-6"}),j>0&&(0,g.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:R(j)})]}),(0,g.jsxs)("div",{className:"relative group",children:[(0,g.jsxs)("button",{className:"\n                    flex items-center space-x-2 p-2 rounded-md transition-colors\n                    ".concat(L("/profile")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-50","\n                  "),children:[e.avatar?(0,g.jsx)("img",{src:e.avatar,alt:"avatar",className:"w-6 h-6 rounded-full object-cover"}):(0,g.jsx)(h.A,{className:"w-5 h-5"}),(0,g.jsx)("span",{className:"text-sm font-medium max-w-24 truncate",children:e.firstName})]}),(0,g.jsxs)("div",{className:"absolute right-0 mt-2 w-100 bg-white rounded-md shadow-lg py-1 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-gray-200",children:[(0,g.jsx)(s.N_,{to:"/dashboard",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-primary-600 transition-colors whitespace-nowrap",children:"Tableau de bord"}),(0,g.jsx)(s.N_,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-primary-600 transition-colors whitespace-nowrap",children:"Mon profil"}),"owner"===e.userType&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"border-t border-gray-100 my-1"}),e.cinVerified?(0,g.jsx)("div",{className:"px-4 py-2 text-xs text-green-600 bg-green-50",children:"\u2713 CIN V\xe9rifi\xe9e"}):e.cinPending||e.cin_verification_requested_at?(0,g.jsx)("div",{className:"px-4 py-2 text-xs text-blue-600 bg-blue-50",children:"\u23f3 V\xe9rification en cours"}):(0,g.jsx)(s.N_,{to:"/cin-verification",className:"block px-4 py-2 text-sm text-yellow-700 hover:bg-yellow-50 transition-colors whitespace-nowrap",children:"V\xe9rifier ma CIN"})]}),(0,g.jsx)("div",{className:"border-t border-gray-100 my-1"}),(0,g.jsxs)("button",{onClick:V,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-red-600 transition-colors whitespace-nowrap",children:[(0,g.jsx)(d.A,{className:"w-4 h-4 inline mr-2"}),"D\xe9connexion"]})]})]})]}):(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)(s.N_,{to:"/login",className:B("/login"),children:"Connexion"}),(0,g.jsx)(s.N_,{to:"/register",className:"btn-primary",children:"Inscription"})]})}),(0,g.jsx)("div",{className:"md:hidden flex items-center",children:(0,g.jsx)("button",{onClick:()=>v(!y),className:"text-gray-700 hover:text-primary-600 p-2 rounded-md transition-colors",children:y?(0,g.jsx)(p.A,{className:"w-6 h-6"}):(0,g.jsx)(m.A,{className:"w-6 h-6"})})})]}),y&&(0,g.jsx)("div",{className:"md:hidden",children:(0,g.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-gray-50 rounded-lg mt-2 border border-gray-200",children:[(0,g.jsx)(s.N_,{to:"/",className:"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(L("/")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),onClick:()=>v(!1),children:"Accueil"}),e&&(0,g.jsx)(s.N_,{to:"/dashboard",className:"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(L("/dashboard")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),onClick:()=>v(!1),children:"Dashboard"}),(0,g.jsx)(s.N_,{to:"/logements",className:"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(L("/logements")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),onClick:()=>v(!1),children:"Logements"}),(0,g.jsx)(s.N_,{to:"/announcements",className:"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(L("/announcements")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),onClick:()=>v(!1),children:"Annonces"}),(0,g.jsx)(s.N_,{to:"/about",className:"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(L("/about")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),onClick:()=>v(!1),children:"\xc0 propos"}),(0,g.jsx)(s.N_,{to:"/contact",className:"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(L("/contact")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),onClick:()=>v(!1),children:"Contact"}),e?(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-2",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between px-3 py-2",children:[(0,g.jsxs)("div",{className:"flex items-center",children:[e.avatar?(0,g.jsx)("img",{src:e.avatar,alt:"avatar",className:"w-5 h-5 rounded-full object-cover mr-3"}):(0,g.jsx)(h.A,{className:"w-5 h-5 text-gray-400 mr-3"}),(0,g.jsxs)("span",{className:"text-sm font-medium text-gray-900 max-w-32 truncate",children:[e.firstName," ",e.lastName]})]}),j>0&&(0,g.jsx)("button",{onClick:e=>E(e,"/messages"),className:"relative",children:(0,g.jsx)("span",{className:"\n                            bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center\n                          ",children:R(j)})})]}),(0,g.jsx)(s.N_,{to:"/dashboard",className:"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(L("/dashboard")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),onClick:()=>v(!1),children:"Tableau de bord"}),(0,g.jsx)(s.N_,{to:"/profile",className:"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(L("/profile")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),onClick:()=>v(!1),children:"Mon profil"}),(0,g.jsxs)("button",{onClick:e=>{_(e,"/messages"),v(!1)},className:"block px-3 py-2 rounded-md text-base font-medium transition-colors flex items-center justify-between ".concat(L("/messages")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),children:[(0,g.jsx)("span",{children:"Messages"}),j>0&&(0,g.jsx)("span",{className:"\n                          bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center\n                        ",children:R(j)})]}),"owner"===e.userType&&(0,g.jsx)("button",{onClick:e=>{_(e,"/create-property"),v(!1)},className:"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(L("/create-property")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),children:"Publier un logement"}),(0,g.jsx)("button",{onClick:()=>{V(),v(!1)},className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-red-600 hover:bg-gray-100 transition-colors",children:"D\xe9connexion"})]})}):(0,g.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-2",children:[(0,g.jsx)(s.N_,{to:"/login",className:"block px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(L("/login")?"text-primary-600 bg-primary-50":"text-gray-700 hover:text-primary-600 hover:bg-gray-100"),onClick:()=>v(!1),children:"Connexion"}),(0,g.jsx)(s.N_,{to:"/register",className:"btn-primary block text-center mx-3 mt-2",onClick:()=>v(!1),children:"Inscription"})]})]})})]})})]})}},9265:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(3986),a=r(5043);const s=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,i=(0,n.A)(e,s);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},i),r?a.createElement("title",{id:o},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const i=a.forwardRef(o)}}]);
//# sourceMappingURL=159.05558ab4.chunk.js.map