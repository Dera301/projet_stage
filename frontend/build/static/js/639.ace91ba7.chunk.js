"use strict";(self.webpackChunkcolocation_antananarivo=self.webpackChunkcolocation_antananarivo||[]).push([[639],{2556:(e,t,r)=>{r.d(t,{A:()=>i});var s=r(3986),a=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,i=(0,s.A)(e,n);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const i=a.forwardRef(l)},2965:(e,t,r)=>{r.d(t,{A:()=>i});var s=r(3986),a=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,i=(0,s.A)(e,n);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const i=a.forwardRef(l)},4538:(e,t,r)=>{r.d(t,{A:()=>i});var s=r(3986),a=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,i=(0,s.A)(e,n);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const i=a.forwardRef(l)},5442:(e,t,r)=>{r.d(t,{A:()=>i});var s=r(3986),a=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,i=(0,s.A)(e,n);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),r?a.createElement("title",{id:l},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const i=a.forwardRef(l)},6639:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var s=r(9379),a=r(5043),n=r(9741),l=r(3216),i=r(4538),o=r(5442),c=r(2556),d=r(2965),m=r(3986);const u=["title","titleId"];function x(e,t){let{title:r,titleId:s}=e,n=(0,m.A)(e,u);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const h=a.forwardRef(x);var b=r(2339),g=r(579);const v=()=>{const{verifyCIN:e,user:t}=(0,n.A)(),r=(0,l.Zp)(),[m,u]=(0,a.useState)({cinNumber:"",cinRectoImage:null,cinVersoImage:null}),[x,v]=(0,a.useState)(!1),[p,j]=(0,a.useState)(null),[N,f]=(0,a.useState)(null),y=(e,t)=>{var r;const a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(a){if(!a.type.startsWith("image/"))return void b.Ay.error("Veuillez s\xe9lectionner une image valide (JPG, PNG)");if(a.size>5242880)return void b.Ay.error("L'image ne doit pas d\xe9passer 5MB");u(e=>(0,s.A)((0,s.A)({},e),{},{[t]:a}));const e=new FileReader;e.onload=e=>{var r,s;"cinRectoImage"===t?j(null===(r=e.target)||void 0===r?void 0:r.result):f(null===(s=e.target)||void 0===s?void 0:s.result)},e.readAsDataURL(a)}},w=e=>{u(t=>(0,s.A)((0,s.A)({},t),{},{[e]:null})),"cinRectoImage"===e?j(null):f(null)};return null!==t&&void 0!==t&&t.cinVerified?(0,g.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,g.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,g.jsx)(i.A,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"V\xe9rification CIN R\xe9ussie"}),(0,g.jsx)("p",{className:"text-gray-600 mb-6",children:"Votre carte d'identit\xe9 nationale a \xe9t\xe9 v\xe9rifi\xe9e avec succ\xe8s. Vous pouvez maintenant publier des annonces."}),(0,g.jsx)("button",{onClick:()=>r("/dashboard"),className:"btn-primary",children:"Retour au tableau de bord"})]})}):(0,g.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,g.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsxs)("button",{onClick:()=>r("/dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[(0,g.jsx)(o.A,{className:"w-5 h-5 mr-2"}),"Retour"]}),(0,g.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"V\xe9rification de votre CIN"}),(0,g.jsx)("p",{className:"text-gray-600 mt-2",children:"Pour publier des annonces, nous devons v\xe9rifier votre identit\xe9 en scannant les deux c\xf4t\xe9s de votre CIN"})]}),(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,g.jsxs)("div",{className:"text-center mb-8",children:[(0,g.jsx)(c.A,{className:"w-16 h-16 text-primary-600 mx-auto mb-4"}),(0,g.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"V\xe9rification d'identit\xe9"}),(0,g.jsx)("p",{className:"text-gray-600 mt-2",children:"T\xe9l\xe9chargez les photos des deux c\xf4t\xe9s de votre CIN"})]}),(0,g.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),m.cinNumber&&m.cinRectoImage&&m.cinVersoImage)if(/^\d{12}$/.test(m.cinNumber)){v(!0);try{await e({cinNumber:m.cinNumber,cinRectoImage:m.cinRectoImage,cinVersoImage:m.cinVersoImage}),setTimeout(()=>{v(!1),r("/dashboard")},1e3)}catch(s){v(!1),b.Ay.error(s.message||"Erreur lors de la v\xe9rification")}}else b.Ay.error("Le num\xe9ro CIN doit contenir exactement 12 chiffres");else b.Ay.error("Veuillez remplir tous les champs")},className:"space-y-8",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Num\xe9ro de CIN *"}),(0,g.jsx)("input",{type:"text",value:m.cinNumber,onChange:e=>u(t=>(0,s.A)((0,s.A)({},t),{},{cinNumber:e.target.value})),className:"input-field",placeholder:"Ex: 123456789012",required:!0,maxLength:12,pattern:"\\d{12}",title:"Le num\xe9ro CIN doit contenir 12 chiffres"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Doit contenir exactement 12 chiffres"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo du recto de votre CIN *"}),(0,g.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,g.jsx)("input",{type:"file",accept:"image/*",onChange:e=>y(e,"cinRectoImage"),className:"hidden",id:"cinRectoImage",required:!0}),p?(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("img",{src:p,alt:"Preview recto CIN",className:"mx-auto h-48 object-cover rounded-lg"}),(0,g.jsx)("button",{type:"button",onClick:()=>w("cinRectoImage"),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:(0,g.jsx)(d.A,{className:"w-4 h-4"})})]}):(0,g.jsxs)("label",{htmlFor:"cinRectoImage",className:"cursor-pointer block",children:[(0,g.jsx)(h,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Cliquez pour t\xe9l\xe9charger une photo du recto de votre CIN"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"C\xf4t\xe9 avec votre photo et informations personnelles"})]})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo du verso de votre CIN *"}),(0,g.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,g.jsx)("input",{type:"file",accept:"image/*",onChange:e=>y(e,"cinVersoImage"),className:"hidden",id:"cinVersoImage",required:!0}),N?(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("img",{src:N,alt:"Preview verso CIN",className:"mx-auto h-48 object-cover rounded-lg"}),(0,g.jsx)("button",{type:"button",onClick:()=>w("cinVersoImage"),className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:(0,g.jsx)(d.A,{className:"w-4 h-4"})})]}):(0,g.jsxs)("label",{htmlFor:"cinVersoImage",className:"cursor-pointer block",children:[(0,g.jsx)(h,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),(0,g.jsx)("p",{className:"text-sm text-gray-600",children:"Cliquez pour t\xe9l\xe9charger une photo du verso de votre CIN"}),(0,g.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"C\xf4t\xe9 avec les informations compl\xe9mentaires"})]})]})]}),(0,g.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,g.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Instructions importantes"}),(0,g.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,g.jsx)("li",{children:"\u2022 Assurez-vous que les deux photos soient nettes et lisibles"}),(0,g.jsx)("li",{children:"\u2022 T\xe9l\xe9chargez le recto (c\xf4t\xe9 photo) et le verso de votre CIN"}),(0,g.jsx)("li",{children:"\u2022 Utilisez un fond neutre et un bon \xe9clairage"}),(0,g.jsx)("li",{children:"\u2022 \xc9vitez les reflets sur la carte"}),(0,g.jsx)("li",{children:"\u2022 Format accept\xe9 : JPG, PNG (max 5MB)"})]})]}),(0,g.jsxs)("div",{className:"flex space-x-4",children:[(0,g.jsx)("button",{type:"button",onClick:()=>r("/dashboard"),className:"flex-1 btn-secondary",disabled:x,children:"Annuler"}),(0,g.jsx)("button",{type:"submit",disabled:x||!m.cinNumber||!m.cinRectoImage||!m.cinVersoImage,className:"flex-1 btn-primary flex items-center justify-center space-x-2",children:x?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,g.jsx)("span",{children:"V\xe9rification en cours..."})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h,{className:"w-5 h-5"}),(0,g.jsx)("span",{children:"V\xe9rifier ma CIN"})]})})]})]})]})]})})}}}]);
//# sourceMappingURL=639.ace91ba7.chunk.js.map