{"version":3,"file":"static/js/728.40fe7c56.chunk.js","mappings":"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","sources":["components/ScheduleAppointmentModal.tsx","../node_modules/@heroicons/react/24/outline/esm/PencilIcon.js","../node_modules/@heroicons/react/24/solid/esm/TrashIcon.js","../node_modules/@heroicons/react/24/outline/esm/MapPinIcon.js","../node_modules/@heroicons/react/24/outline/esm/XMarkIcon.js","../node_modules/@heroicons/react/24/outline/esm/CalendarIcon.js","../node_modules/@heroicons/react/24/outline/esm/CheckIcon.js","pages/AppointmentsPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { CalendarIcon, XMarkIcon } from '@heroicons/react/24/outline';\nimport { apiJson, apiGet } from '../config';\nimport toast from 'react-hot-toast';\nimport { useAuth } from '../contexts/AuthContext';\n\ninterface ScheduleAppointmentModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  propertyId: string;\n  ownerId: string;\n  propertyTitle: string;\n  appointment?: any; // Pour l'édition\n  onUpdate?: (data: any) => void; // Pour l'édition\n}\n\nconst ScheduleAppointmentModal: React.FC<ScheduleAppointmentModalProps> = ({\n  isOpen,\n  onClose,\n  propertyId,\n  ownerId,\n  propertyTitle,\n  appointment,\n  onUpdate\n}) => {\n  const { user } = useAuth();\n  const [selectedDate, setSelectedDate] = useState('');\n  const [selectedTime, setSelectedTime] = useState('');\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [existingAppointments, setExistingAppointments] = useState<any[]>([]);\n  const [checkingAvailability, setCheckingAvailability] = useState(false);\n\n  const timeSlots = [\n    '08:00', '09:00', '10:00', '11:00', \n    '14:00', '15:00', '16:00', '17:00'\n  ];\n\n  // Charger les rendez-vous existants pour vérifier les disponibilités\n  useEffect(() => {\n\n    const loadExistingAppointments = async () => {\n    if (!user) return;\n    \n    setCheckingAvailability(true);\n    try {\n      const data = await apiGet('/api/appointments/get_all');\n      \n      if (data.success) {\n        setExistingAppointments(data.data || []);\n      }\n    } catch (error) {\n      console.error('Erreur lors du chargement des rendez-vous existants');\n    } finally {\n      setCheckingAvailability(false);\n    }\n  };\n    if (isOpen && user) {\n      loadExistingAppointments();\n    }\n  }, [isOpen, user]);\n\n  // Pré-remplir le formulaire en mode édition\n  useEffect(() => {\n    if (appointment) {\n      const appointmentDate = new Date(appointment.appointmentDate);\n      setSelectedDate(appointmentDate.toISOString().split('T')[0]);\n      setSelectedTime(appointmentDate.toTimeString().slice(0, 5));\n      setMessage(appointment.message);\n    } else {\n      setSelectedDate('');\n      setSelectedTime('');\n      setMessage('');\n    }\n  }, [appointment]);\n\n  \n\n  const isTimeSlotTaken = (date: string, time: string) => {\n    const selectedDateTime = new Date(`${date}T${time}:00`);\n    const now = new Date();\n    \n    return existingAppointments.some(apt => {\n      if (apt.id === appointment?.id) return false; // Ignorer le rendez-vous en cours d'édition\n      \n      const aptDateTime = new Date(apt.appointmentDate);\n      // Ignorer les rendez-vous passés\n      if (aptDateTime.getTime() < now.getTime()) return false;\n      // Ignorer les rendez-vous complétés\n      if (apt.status === 'completed') return false;\n\n      const timeDiff = Math.abs(selectedDateTime.getTime() - aptDateTime.getTime());\n      const hoursDiff = timeDiff / (1000 * 60 * 60);\n      \n      // Considérer comme pris si dans les 2 heures et non annulé\n      return hoursDiff < 2 && apt.status !== 'cancelled';\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!selectedDate || !selectedTime) {\n      toast.error('Veuillez sélectionner une date et une heure');\n      return;\n    }\n\n    if (!user) {\n      toast.error('Veuillez vous connecter pour planifier un rendez-vous');\n      return;\n    }\n\n    // Vérifier si le créneau est déjà pris\n    if (isTimeSlotTaken(selectedDate, selectedTime)) {\n      toast.error('Ce créneau horaire est déjà réservé. Veuillez choisir un autre horaire.');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const appointmentDateTime = `${selectedDate}T${selectedTime}:00`;\n      \n      if (appointment && onUpdate) {\n        // Mode édition\n        await onUpdate({\n          appointmentDate: appointmentDateTime,\n          message: message || `Je souhaite visiter le logement \"${propertyTitle}\"`\n        });\n      } else {\n        // Mode création\n        const data = await apiJson('/api/appointments/create', 'POST', {\n          propertyId,\n          appointmentDate: appointmentDateTime,\n          message: message || `Je souhaite visiter le logement \"${propertyTitle}\"`\n        });\n\n        if (data.success) {\n          toast.success('Rendez-vous planifié avec succès !');\n          onClose();\n        } else {\n          toast.error(data.message || 'Erreur lors de la planification');\n        }\n      }\n    } catch (error) {\n      console.error('Erreur:', error);\n      toast.error('Erreur lors de la planification du rendez-vous');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  // Calcul de la date minimale (aujourd'hui) et maximale (dans 30 jours)\n  const today = new Date().toISOString().split('T')[0];\n  const maxDate = new Date();\n  maxDate.setDate(maxDate.getDate() + 30);\n  const maxDateStr = maxDate.toISOString().split('T')[0];\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">\n            {appointment ? 'Modifier la visite' : 'Planifier une visite'}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <XMarkIcon className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Logement\n            </label>\n            <p className=\"text-gray-900 font-medium\">{propertyTitle}</p>\n          </div>\n\n          <div>\n            <label htmlFor=\"date\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Date de visite *\n            </label>\n            <div className=\"relative\">\n              <CalendarIcon className=\"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2\" />\n              <input\n                type=\"date\"\n                id=\"date\"\n                required\n                min={today}\n                max={maxDateStr}\n                value={selectedDate}\n                onChange={(e) => setSelectedDate(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Heure de visite *\n            </label>\n            {checkingAvailability ? (\n              <div className=\"flex justify-center py-4\">\n                <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600\"></div>\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-2 gap-2\">\n                {timeSlots.map((time) => {\n                  const isTaken = selectedDate ? isTimeSlotTaken(selectedDate, time) : false;\n                  return (\n                    <button\n                      key={time}\n                      type=\"button\"\n                      onClick={() => !isTaken && setSelectedTime(time)}\n                      disabled={isTaken}\n                      className={`p-3 border rounded-lg text-sm font-medium transition-colors ${\n                        selectedTime === time\n                          ? 'border-primary-500 bg-primary-50 text-primary-700'\n                          : isTaken\n                          ? 'border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed'\n                          : 'border-gray-300 text-gray-700 hover:border-primary-400'\n                      }`}\n                      title={isTaken ? 'Créneau indisponible' : ''}\n                    >\n                      {time}\n                      {isTaken && (\n                        <div className=\"text-xs text-red-500 mt-1\">Indisponible</div>\n                      )}\n                    </button>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n\n          <div>\n            <label htmlFor=\"message\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Message au propriétaire (optionnel)\n            </label>\n            <textarea\n              id=\"message\"\n              rows={4}\n              value={message}\n              onChange={(e) => setMessage(e.target.value)}\n              placeholder=\"Bonjour, je souhaite visiter votre logement...\"\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n            />\n          </div>\n\n          <div className=\"flex space-x-3 pt-4\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"flex-1 btn-secondary\"\n            >\n              Annuler\n            </button>\n            <button\n              type=\"submit\"\n              disabled={loading || !selectedDate || !selectedTime || checkingAvailability}\n              className=\"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading \n                ? (appointment ? 'Modification...' : 'Planification...') \n                : (appointment ? 'Modifier' : 'Confirmer')\n              }\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ScheduleAppointmentModal;","import * as React from \"react\";\nfunction PencilIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PencilIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction TrashIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TrashIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction MapPinIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(MapPinIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 18 18 6M6 6l12 12\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XMarkIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CalendarIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CalendarIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CheckIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m4.5 12.75 6 6 9-13.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CheckIcon);\nexport default ForwardRef;","import React, { useState, useEffect, useCallback } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { apiGet, apiJson } from '../config';\nimport { \n  CalendarIcon, \n  CheckIcon, \n  XMarkIcon, \n  PencilIcon,\n  MapPinIcon\n} from '@heroicons/react/24/outline';\nimport { TrashIcon } from '@heroicons/react/24/solid'; // Changé de outline à solid\nimport toast from 'react-hot-toast';\nimport ScheduleAppointmentModal from '../components/ScheduleAppointmentModal';\n\ninterface Appointment {\n  id: string;\n  propertyId: string;\n  propertyTitle: string;\n  appointmentDate: string;\n  status: 'pending' | 'confirmed' | 'cancelled' | 'completed';\n  message: string;\n  studentFirstName?: string;\n  studentLastName?: string;\n  studentEmail?: string;\n  studentPhone?: string;\n  ownerFirstName?: string;\n  ownerLastName?: string;\n  ownerEmail?: string;\n  ownerPhone?: string;\n  address?: string;\n  ownerId?: string; // Ajout de ownerId optionnel\n}\n\nconst AppointmentsPage: React.FC = () => {\n  const { user } = useAuth();\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [editingAppointment, setEditingAppointment] = useState<Appointment | null>(null);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showCancelModal, setShowCancelModal] = useState(false);\n  const [cancelReason, setCancelReason] = useState('');\n  const [appointmentToCancel, setAppointmentToCancel] = useState<Appointment | null>(null);\n\n  const loadAppointments = useCallback(async () => {\n    if (!user) return;\n    \n    setLoading(true);\n    try {\n      const data = await apiGet('/api/appointments/get_all');\n      \n      if (data.success) {\n        const items = (data.data || []) as Appointment[];\n        // Exclure les rendez-vous annulés de l'affichage\n        setAppointments(items.filter(a => a.status !== 'cancelled'));\n      }\n    } catch (error) {\n      toast.error('Erreur lors du chargement des rendez-vous');\n    } finally {\n      setLoading(false);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (user) {\n      loadAppointments();\n    }\n  }, [user, loadAppointments]);\n\n  const updateStatus = async (id: string, status: string, cancellationReason?: string) => {\n    try {\n      const payload: any = { status };\n      if (cancellationReason) {\n        payload.cancellationReason = cancellationReason;\n      }\n      const data = await apiJson(`/api/appointments/update_status/${id}`, 'PUT', payload);\n      \n      if (data.success) {\n        toast.success('Statut mis à jour');\n        setAppointments(prev => prev.map(a => a.id === id ? { ...a, status: status as any } : a));\n        if (status === 'cancelled') {\n          setAppointments(prev => prev.filter(a => a.id !== id));\n        }\n      }\n    } catch (error: any) {\n      toast.error(error.message || 'Erreur lors de la mise à jour');\n    }\n  };\n\n  const handleCancelClick = (appointment: Appointment) => {\n    setAppointmentToCancel(appointment);\n    setShowCancelModal(true);\n    setCancelReason('');\n  };\n\n  const handleConfirmCancel = async () => {\n    if (!appointmentToCancel) return;\n    \n    if (!cancelReason.trim()) {\n      toast.error('Veuillez saisir une raison d\\'annulation');\n      return;\n    }\n\n    await updateStatus(appointmentToCancel.id, 'cancelled', cancelReason);\n    setShowCancelModal(false);\n    setAppointmentToCancel(null);\n    setCancelReason('');\n  };\n\n  const deleteAppointment = async (id: string) => {\n    if (!window.confirm('Êtes-vous sûr de vouloir supprimer ce rendez-vous ?')) {\n      return;\n    }\n\n    try {\n      // Note: Les rendez-vous ne sont pas supprimés, mais annulés via update_status\n      const data = await apiJson(`/api/appointments/update_status/${id}`, 'PUT', { status: 'cancelled' });\n      \n      if (data.success) {\n        toast.success('Rendez-vous annulé');\n        // Retirer localement et assurer la cohérence après refresh\n        setAppointments(prev => prev.filter(a => a.id !== id));\n      }\n    } catch (error) {\n      toast.error('Erreur lors de la suppression');\n    }\n  };\n\n  const handleEdit = (appointment: Appointment) => {\n    setEditingAppointment(appointment);\n    setShowEditModal(true);\n  };\n\n  const handleUpdateAppointment = async (updatedData: any) => {\n    try {\n      // Utiliser update_status pour mettre à jour le rendez-vous\n      const data = await apiJson(`/api/appointments/update_status/${editingAppointment?.id}`, 'PUT', {\n        status: updatedData.status || editingAppointment?.status,\n        message: updatedData.message || editingAppointment?.message\n      });\n      \n      if (data.success) {\n        toast.success('Rendez-vous modifié');\n        setShowEditModal(false);\n        setEditingAppointment(null);\n        loadAppointments(); // Recharger la liste\n      }\n    } catch (error) {\n      toast.error('Erreur lors de la modification');\n    }\n  };\n\n  if (!user) {\n    return <div className=\"min-h-screen flex items-center justify-center\">Veuillez vous connecter</div>;\n  }\n\n  const getStatusBadge = (status: string) => {\n    const badges = {\n      pending: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n      confirmed: 'bg-green-100 text-green-800 border-green-200',\n      cancelled: 'bg-red-100 text-red-800 border-red-200',\n      completed: 'bg-blue-100 text-blue-800 border-blue-200'\n    };\n    return badges[status as keyof typeof badges] || 'bg-gray-100 text-gray-800';\n  };\n\n  const getStatusLabel = (status: string) => {\n    const labels = {\n      pending: 'En attente',\n      confirmed: 'Confirmé',\n      cancelled: 'Annulé',\n      completed: 'Terminé'\n    };\n    return labels[status as keyof typeof labels] || status;\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleString('fr-FR', {\n      weekday: 'short',\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const canEdit = (appointment: Appointment) => {\n    const appointmentDate = new Date(appointment.appointmentDate);\n    const now = new Date();\n    const hoursDiff = (appointmentDate.getTime() - now.getTime()) / (1000 * 60 * 60);\n    \n    // Permettre la modification seulement si le rendez-vous est dans plus de 2 heures\n    return hoursDiff > 2 && appointment.status !== 'cancelled' && appointment.status !== 'completed';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Mes Rendez-vous</h1>\n          <p className=\"text-gray-600\">\n            {user.userType === 'student' \n              ? 'Gérez vos rendez-vous avec les propriétaires'\n              : 'Gérez les rendez-vous pour vos propriétés'}\n          </p>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n          </div>\n        ) : appointments.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 text-center py-12\">\n            <CalendarIcon className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">Aucun rendez-vous</h3>\n            <p className=\"text-gray-600\">\n              {user.userType === 'student'\n                ? 'Vous n\\'avez pas encore de rendez-vous planifié'\n                : 'Aucun étudiant n\\'a demandé de rendez-vous'}\n            </p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {appointments.map(appointment => (\n              <div key={appointment.id} className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow\">\n                {/* Header avec statut */}\n                <div className=\"bg-gray-50 px-4 py-3 border-b border-gray-200\">\n                  <div className=\"flex items-center justify-between\">\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${getStatusBadge(appointment.status)}`}>\n                      {getStatusLabel(appointment.status)}\n                    </span>\n                    <div className=\"flex items-center space-x-1\">\n                      {canEdit(appointment) && (\n                        <button\n                          onClick={() => handleEdit(appointment)}\n                          className=\"text-gray-400 hover:text-primary-600 transition-colors p-1\"\n                          title=\"Modifier\"\n                        >\n                          <PencilIcon className=\"w-4 h-4\" />\n                        </button>\n                      )}\n                      <button\n                        onClick={() => deleteAppointment(appointment.id)}\n                        className=\"text-gray-400 hover:text-red-600 transition-colors p-1\"\n                        title=\"Supprimer\"\n                      >\n                        <TrashIcon className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Contenu */}\n                <div className=\"p-4\">\n                  <h3 className=\"font-semibold text-gray-900 mb-2 line-clamp-2\">\n                    {appointment.propertyTitle}\n                  </h3>\n                  \n                  {appointment.address && (\n                    <div className=\"flex items-center text-sm text-gray-600 mb-3\">\n                      <MapPinIcon className=\"w-4 h-4 mr-1 flex-shrink-0\" />\n                      <span className=\"truncate\">{appointment.address}</span>\n                    </div>\n                  )}\n\n                  <div className=\"flex items-center text-sm text-gray-600 mb-3\">\n                    <CalendarIcon className=\"w-4 h-4 mr-2 flex-shrink-0\" />\n                    <span>{formatDate(appointment.appointmentDate)}</span>\n                  </div>\n\n                  {/* Informations de contact */}\n                  <div className=\"text-sm text-gray-600 space-y-1 mb-4\">\n                    {user.userType === 'owner' && (\n                      <>\n                        <p><strong>Étudiant:</strong> {appointment.studentFirstName} {appointment.studentLastName}</p>\n                        <p><strong>Tél:</strong> {appointment.studentPhone}</p>\n                      </>\n                    )}\n                    {user.userType === 'student' && (\n                      <>\n                        <p><strong>Propriétaire:</strong> {appointment.ownerFirstName} {appointment.ownerLastName}</p>\n                        <p><strong>Tél:</strong> {appointment.ownerPhone}</p>\n                      </>\n                    )}\n                  </div>\n\n                  {appointment.message && (\n                    <div className=\"mt-3 p-3 bg-gray-50 rounded-lg\">\n                      <p className=\"text-sm text-gray-700 line-clamp-3\">{appointment.message}</p>\n                    </div>\n                  )}\n\n                  {/* Actions */}\n                  <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                    <div className=\"flex space-x-2\">\n                      {appointment.status === 'pending' && user.userType === 'owner' && (\n                        <>\n                          <button\n                            onClick={() => updateStatus(appointment.id, 'confirmed')}\n                            className=\"flex-1 btn-primary text-sm flex items-center justify-center space-x-1 py-2\"\n                          >\n                            <CheckIcon className=\"w-4 h-4\" />\n                            <span>Confirmer</span>\n                          </button>\n                          <button\n                            onClick={() => handleCancelClick(appointment)}\n                            className=\"flex-1 btn-secondary text-sm flex items-center justify-center space-x-1 py-2\"\n                          >\n                            <XMarkIcon className=\"w-4 h-4\" />\n                            <span>Refuser</span>\n                          </button>\n                        </>\n                      )}\n                      {appointment.status === 'confirmed' && user.userType === 'student' && (\n                        <button\n                          onClick={() => updateStatus(appointment.id, 'cancelled')}\n                          className=\"flex-1 btn-secondary text-sm flex items-center justify-center space-x-1 py-2\"\n                        >\n                          <XMarkIcon className=\"w-4 h-4\" />\n                          <span>Annuler</span>\n                        </button>\n                      )}\n                      {appointment.status === 'confirmed' && user.userType === 'owner' && (\n                        <>\n                          <button\n                            onClick={() => updateStatus(appointment.id, 'completed')}\n                            className=\"flex-1 btn-primary text-sm flex items-center justify-center space-x-1 py-2\"\n                          >\n                            <CheckIcon className=\"w-4 h-4\" />\n                            <span>Terminé</span>\n                          </button>\n                          <button\n                            onClick={() => handleCancelClick(appointment)}\n                            className=\"flex-1 btn-secondary text-sm flex items-center justify-center space-x-1 py-2\"\n                          >\n                            <XMarkIcon className=\"w-4 h-4\" />\n                            <span>Annuler</span>\n                          </button>\n                        </>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Modal de modification */}\n      {editingAppointment && (\n        <ScheduleAppointmentModal\n          isOpen={showEditModal}\n          onClose={() => {\n            setShowEditModal(false);\n            setEditingAppointment(null);\n          }}\n          propertyId={editingAppointment.propertyId}\n          ownerId={editingAppointment.ownerId || ''}\n          propertyTitle={editingAppointment.propertyTitle}\n          appointment={editingAppointment}\n          onUpdate={handleUpdateAppointment}\n        />\n      )}\n\n      {/* Modal d'annulation avec raison */}\n      {showCancelModal && appointmentToCancel && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n            <h2 className=\"text-xl font-semibold mb-4\">Annuler le rendez-vous</h2>\n            <p className=\"text-gray-600 mb-4\">\n              Vous êtes sur le point d'annuler le rendez-vous pour \"{appointmentToCancel.propertyTitle}\".\n              Veuillez indiquer la raison de cette annulation :\n            </p>\n            <textarea\n              value={cancelReason}\n              onChange={(e) => setCancelReason(e.target.value)}\n              placeholder=\"Ex: Indisponibilité, changement de planning, etc.\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg mb-4 min-h-[100px]\"\n              required\n            />\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={handleConfirmCancel}\n                className=\"flex-1 btn-primary\"\n              >\n                Confirmer l'annulation\n              </button>\n              <button\n                onClick={() => {\n                  setShowCancelModal(false);\n                  setAppointmentToCancel(null);\n                  setCancelReason('');\n                }}\n                className=\"flex-1 btn-secondary\"\n              >\n                Annuler\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AppointmentsPage;"],"names":["_ref","isOpen","onClose","propertyId","ownerId","propertyTitle","appointment","onUpdate","user","useAuth","selectedDate","setSelectedDate","useState","selectedTime","setSelectedTime","message","setMessage","loading","setLoading","existingAppointments","setExistingAppointments","checkingAvailability","setCheckingAvailability","useEffect","async","data","apiGet","success","error","console","loadExistingAppointments","appointmentDate","Date","toISOString","split","toTimeString","slice","isTimeSlotTaken","date","time","selectedDateTime","concat","now","some","apt","id","aptDateTime","getTime","status","Math","abs","today","maxDate","setDate","getDate","maxDateStr","_jsx","className","children","_jsxs","onClick","XMarkIcon","onSubmit","e","preventDefault","toast","appointmentDateTime","apiJson","htmlFor","CalendarIcon","type","required","min","max","value","onChange","target","map","isTaken","disabled","title","rows","placeholder","PencilIcon","svgRef","titleId","props","_objectWithoutProperties","_excluded","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","strokeLinecap","strokeLinejoin","d","TrashIcon","fillRule","clipRule","MapPinIcon","CheckIcon","AppointmentsPage","appointments","setAppointments","editingAppointment","setEditingAppointment","showEditModal","setShowEditModal","showCancelModal","setShowCancelModal","cancelReason","setCancelReason","appointmentToCancel","setAppointmentToCancel","loadAppointments","useCallback","items","filter","a","updateStatus","cancellationReason","payload","prev","_objectSpread","handleCancelClick","getStatusLabel","pending","confirmed","cancelled","completed","canEdit","userType","length","handleEdit","window","confirm","deleteAppointment","address","dateString","toLocaleString","weekday","year","month","day","hour","minute","_Fragment","studentFirstName","studentLastName","studentPhone","ownerFirstName","ownerLastName","ownerPhone","ScheduleAppointmentModal","updatedData","trim"],"sourceRoot":""}