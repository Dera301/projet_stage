"use strict";(self.webpackChunkcolocation_antananarivo=self.webpackChunkcolocation_antananarivo||[]).push([[210],{3210:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var i=s(5043),r=s(3216),a=s(5475),n=s(2339),o=s(9741),l=s(579);const c="".concat("","/logo_colo.svg"),d=()=>{const{verifyEmail:e,resendVerificationCode:t}=(0,o.A)(),s=(0,r.Zp)(),d=(0,r.zy)(),[m]=(0,a.ok)(),u=(0,i.useMemo)(()=>d.state||{},[d.state]),x=u.pendingId||m.get("pendingId")||"",p=u.email||m.get("email")||"",[f,v]=(0,i.useState)(x),[y,h]=(0,i.useState)(p),[g,j]=(0,i.useState)(""),[b,N]=(0,i.useState)(!1),[C,w]=(0,i.useState)(!1);(0,i.useEffect)(()=>{v(x),h(p)},[x,p]),(0,i.useEffect)(()=>{x&&p||(0,n.Ay)("Veuillez v\xe9rifier votre bo\xeete mail et suivre le lien re\xe7u pour valider votre compte.",{icon:"\ud83d\udce9"})},[x,p]);return f?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,l.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)("img",{src:c,alt:"ColocAntananarivo",className:"h-12 w-auto"})}),(0,l.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Confirmez votre adresse email"}),(0,l.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Entrez le code de 6 chiffres re\xe7u \xe0 ",(0,l.jsx)("span",{className:"font-medium",children:y||"votre email"}),"."]})]}),(0,l.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),f)if(g){N(!0);try{const t=await e(f,g);t.success?(n.Ay.success("Compte v\xe9rifi\xe9 avec succ\xe8s ! Vous pouvez maintenant vous connecter."),s("/login")):n.Ay.error(t.message||"\xc9chec de la v\xe9rification du compte.")}catch(i){console.error("Erreur lors de la v\xe9rification du compte:",i),n.Ay.error(i.message||"Code de v\xe9rification invalide ou expir\xe9")}finally{N(!1)}}else n.Ay.error("Veuillez saisir le code de v\xe9rification.");else n.Ay.error("Identifiant de v\xe9rification manquant. Merci de recommencer votre inscription.")},children:[(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"pendingId",className:"block text-sm font-medium text-gray-700",children:"Identifiant d'inscription"}),(0,l.jsx)("input",{id:"pendingId",name:"pendingId",type:"text",value:f,onChange:e=>v(e.target.value),className:"input-field mt-1",readOnly:!u.pendingId}),(0,l.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Conservez cet identifiant pour toute assistance. Il est inclus dans le lien re\xe7u par email."})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),(0,l.jsx)("input",{id:"email",name:"email",type:"email",value:y,onChange:e=>h(e.target.value),className:"input-field mt-1",placeholder:"votre@email.com"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700",children:"Code de v\xe9rification"}),(0,l.jsx)("input",{id:"verificationCode",name:"verificationCode",type:"text",value:g,onChange:e=>j(e.target.value),className:"input-field mt-1 text-center tracking-widest text-lg",placeholder:"123456",maxLength:6,required:!0})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"Pas re\xe7u de code ?"}),(0,l.jsx)("button",{type:"button",onClick:async()=>{if(y){w(!0);try{const e=await t({email:y,registrationId:f||void 0});e.success||n.Ay.error(e.message||"Impossible d'envoyer un nouveau code")}catch(e){console.error("Erreur lors du renvoi du code:",e),n.Ay.error(e.message||"Impossible d'envoyer un nouveau code")}finally{w(!1)}}else n.Ay.error("Veuillez indiquer une adresse email valide.")},disabled:C,className:"font-medium text-primary-600 hover:text-primary-500 disabled:opacity-50",children:C?"Envoi...":"Renvoyer le code"})]})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("button",{type:"submit",disabled:b,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"V\xe9rification...":"Activer mon compte"}),(0,l.jsxs)("p",{className:"text-center text-sm text-gray-600",children:["Vous avez d\xe9j\xe0 valid\xe9 votre adresse ?"," ",(0,l.jsx)(a.N_,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Connectez-vous"})]})]})]})]})}):(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-12",children:(0,l.jsxs)("div",{className:"max-w-lg w-full space-y-6 bg-white shadow-xl rounded-xl p-8 text-center",children:[(0,l.jsx)("img",{src:c,alt:"ColocAntananarivo",className:"h-12 mx-auto"}),(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"V\xe9rification requise"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Nous ne trouvons pas d'inscription en attente. Cliquez sur le bouton ci-dessous pour recommencer la cr\xe9ation de votre compte."}),(0,l.jsx)(a.N_,{to:"/register",className:"inline-flex justify-center rounded-md border border-transparent bg-primary-600 px-6 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cr\xe9er un compte"})]})})}}}]);
//# sourceMappingURL=210.a6e81e54.chunk.js.map