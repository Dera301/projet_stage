{"version":3,"file":"static/js/746.bd34a32d.chunk.js","mappings":"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","sources":["hooks/useCINVerification.ts","../node_modules/@heroicons/react/24/outline/esm/PhotoIcon.js","../node_modules/@heroicons/react/24/outline/esm/IdentificationIcon.js","components/CINVerificationModal.tsx","../node_modules/@heroicons/react/24/outline/esm/MagnifyingGlassIcon.js","pages/AnnouncementsPage.tsx","../node_modules/@heroicons/react/24/outline/esm/PlusIcon.js"],"sourcesContent":["import { useState, useCallback } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useNavigate } from 'react-router-dom';\n\ninterface CINVerificationResult {\n  isVerified: boolean;\n  isPending: boolean;\n  requiresVerification: boolean;\n  showVerificationModal: boolean;\n  setShowVerificationModal: (show: boolean) => void;\n  checkVerification: (e?: React.MouseEvent) => boolean;\n  onClickHandler: (e: React.MouseEvent, path: string) => void;\n}\n\nexport const useCINVerification = (): CINVerificationResult => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [showVerificationModal, setShowVerificationModal] = useState(false);\n  \n  const isVerified = user?.cinVerified || user?.cin_verified || false;\n  const isPending = user?.cinPending || !!user?.cin_verification_requested_at;\n  const requiresVerification = user?.userType === 'owner' && !isVerified && !isPending;\n\n  // Vérifier la vérification CIN si nécessaire\n  const checkVerification = useCallback((e?: React.MouseEvent): boolean => {\n    if (e) {\n      e.preventDefault();\n    }\n    \n    // Si l'utilisateur n'est pas connecté, on le redirige vers la page de connexion\n    if (!user) {\n      navigate('/login', { state: { from: window.location.pathname } });\n      return false;\n    }\n    \n    // Vérifier si la vérification CIN est requise\n    if (requiresVerification) {\n      setShowVerificationModal(true);\n      return false;\n    }\n    \n    // Si l'utilisateur est connecté et vérifié, on retourne true\n    return true;\n  }, [requiresVerification, user, navigate]);\n\n  return {\n    isVerified,\n    isPending,\n    requiresVerification,\n    showVerificationModal,\n    setShowVerificationModal,\n    checkVerification,\n    // Ajout d'un gestionnaire de clic pour les liens\n    onClickHandler: (e: React.MouseEvent, path: string) => {\n      if (checkVerification(e)) {\n        navigate(path);\n      }\n    }\n  };\n};\n\nexport default useCINVerification;\n","import * as React from \"react\";\nfunction PhotoIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PhotoIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction IdentificationIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(IdentificationIcon);\nexport default ForwardRef;","import React from 'react';\nimport { XMarkIcon, IdentificationIcon } from '@heroicons/react/24/outline';\nimport { Link } from 'react-router-dom';\n\ninterface CINVerificationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  showBackButton?: boolean;\n  backButtonText?: string;\n  onBackClick?: () => void;\n}\n\nconst CINVerificationModal: React.FC<CINVerificationModalProps> = ({\n  isOpen,\n  onClose,\n  showBackButton = true,\n  backButtonText = 'Retour',\n  onBackClick\n}) => {\n  \n  const handleClose = () => {\n    onClose();\n  };\n\n  const handleBack = () => {\n    if (onBackClick) {\n      onBackClick();\n    }\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative\">\n        <button\n          onClick={handleClose}\n          className=\"absolute top-4 right-4 text-gray-500 hover:text-gray-700\"\n        >\n          <XMarkIcon className=\"h-6 w-6\" />\n        </button>\n        \n        <div className=\"text-center\">\n          <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-yellow-100 mb-4\">\n            <IdentificationIcon className=\"h-8 w-8 text-yellow-600\" />\n          </div>\n          \n          <h3 className=\"text-xl font-bold text-gray-900 mb-2\">\n            Vérification Requise\n          </h3>\n          \n          <p className=\"text-gray-600 mb-6\">\n            Vous devez vérifier votre CIN avant de pouvoir accéder à cette fonctionnalité.\n          </p>\n          \n          <div className=\"space-y-3\">\n            <Link\n              to=\"/cin-verification\"\n              onClick={onClose}\n              className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n            >\n              Vérifier mon CIN\n            </Link>\n            \n            {showBackButton && (\n              <button\n                type=\"button\"\n                onClick={handleBack}\n                className=\"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n              >\n                {backButtonText}\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CINVerificationModal;\n","import * as React from \"react\";\nfunction MagnifyingGlassIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(MagnifyingGlassIcon);\nexport default ForwardRef;","import React, { useMemo, useState } from 'react';\nimport { useAnnouncement } from '../contexts/AnnouncementContext';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { useMessage } from '../contexts/MessageContext';\nimport { ChatBubbleLeftRightIcon as ChatIcon, PhotoIcon, PlusIcon, MagnifyingGlassIcon, XMarkIcon } from '@heroicons/react/24/outline';\nimport toast from 'react-hot-toast';\nimport { formatDistanceToNow } from 'date-fns';\nimport { fr } from 'date-fns/locale';\nimport useCINVerification from '../hooks/useCINVerification';\nimport CINVerificationModal from '../components/CINVerificationModal';\n\nconst AnnouncementsPage: React.FC = () => {\n  const { announcements, loading } = useAnnouncement();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const { sendMessage } = useMessage();\n\n  // États locaux\n  const [searchQuery, setSearchQuery] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 9;\n  const [showContactForm, setShowContactForm] = useState(false);\n  const [contactMessage, setContactMessage] = useState('');\n  const [selectedAnnouncement, setSelectedAnnouncement] = useState<any | null>(null);\n  \n  // Récupération des états de vérification CIN\n  const { \n    checkVerification, \n    showVerificationModal, \n    setShowVerificationModal \n  } = useCINVerification();\n\n  // Fonction pour obtenir l'URL d'une image\n  const getImageUrl = (imageUrl: string | undefined) => {\n    if (!imageUrl) return '/api/placeholder/400/300';\n    if (imageUrl.startsWith('http')) return imageUrl;\n    if (imageUrl.startsWith('/')) return `http://localhost${imageUrl}`;\n    return imageUrl;\n  };\n\n  // Filtrer les annonces en fonction de la recherche\n  const filteredAnnouncements = useMemo(() => {\n    if (!searchQuery) return announcements;\n    \n    return announcements.filter(announcement => \n      announcement.content?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      announcement.author?.firstName?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      announcement.author?.lastName?.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n  }, [announcements, searchQuery]);\n\n  // Pagination des annonces\n  const paginatedAnnouncements = useMemo(() => {\n    const startIndex = (currentPage - 1) * itemsPerPage;\n    return filteredAnnouncements.slice(startIndex, startIndex + itemsPerPage);\n  }, [filteredAnnouncements, currentPage]);\n\n  const totalPages = Math.ceil(filteredAnnouncements.length / itemsPerPage);\n\n  const openContactFormForAnnouncement = (e: React.MouseEvent, announcement: any) => {\n    e.preventDefault();\n    if (!checkVerification(e)) {\n      return;\n    }\n    if (!user) {\n      navigate('/login');\n      return;\n    }\n    if (user && Number(announcement.author?.id) === Number(user.id)) {\n      return;\n    }\n\n    setSelectedAnnouncement(announcement);\n    setShowContactForm(true);\n    setContactMessage(\n      `Bonjour ${announcement.author?.firstName || ''}, je suis intéressé(e) par votre annonce de recherche de colocation.`\n    );\n  };\n\n  const handleSendAnnouncementMessage = async () => {\n    if (!selectedAnnouncement || !contactMessage.trim()) {\n      toast.error('Veuillez saisir un message');\n      return;\n    }\n\n    try {\n      await sendMessage(selectedAnnouncement.author.id, contactMessage);\n      toast.success('Message envoyé avec succès !');\n      setContactMessage('');\n      setShowContactForm(false);\n      setSelectedAnnouncement(null);\n    } catch (error) {\n      toast.error(\"Erreur lors de l'envoi du message\");\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      {/* Modal de vérification CIN */}\n      <CINVerificationModal\n        isOpen={showVerificationModal}\n        onClose={() => setShowVerificationModal(false)}\n        backButtonText=\"Retour aux annonces\"\n      />\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        {/* Barre de recherche */}\n        <div className=\"mb-8\">\n          <div className=\"max-w-2xl mx-auto\">\n            <div className=\"relative\">\n              <MagnifyingGlassIcon className=\"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2\" />\n              <input\n                type=\"text\"\n                placeholder=\"Rechercher une annonce par contenu ou nom d'auteur...\"\n                value={searchQuery}\n                onChange={(e) => {\n                  setSearchQuery(e.target.value);\n                  setCurrentPage(1);\n                }}\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex items-center justify-between mb-8\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Annonces des étudiants</h1>\n            <p className=\"text-gray-600\">Recherches de colocation publiées par les étudiants</p>\n          </div>\n          {user?.userType === 'student' && (\n            <button \n              onClick={(e) => {\n                e.preventDefault();\n                if (checkVerification(e)) {\n                  navigate('/create-announcement');\n                }\n              }}\n              className=\"btn-primary flex items-center space-x-2\"\n            >\n              <PlusIcon className=\"w-4 h-4\" />\n              <span>Publier une annonce</span>\n            </button>\n          )}\n        </div>\n          \n        {loading ? (\n          <div className=\"flex items-center justify-center py-24\">\n            <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-primary-600\"></div>\n          </div>\n        ) : filteredAnnouncements.length === 0 ? (\n          <div className=\"text-center py-24\">\n            <PhotoIcon className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n              {searchQuery ? 'Aucune annonce trouvée' : 'Aucune annonce pour le moment'}\n            </h3>\n            <p className=\"text-gray-600 mb-4\">\n              {searchQuery ? 'Essayez avec d\\'autres termes de recherche' : 'Soyez le premier à publier une annonce de colocation.'}\n            </p>\n            {user?.userType === 'student' && !searchQuery && (\n              <button \n                onClick={(e) => {\n                  e.preventDefault();\n                  if (checkVerification(e)) {\n                    navigate('/create-announcement');\n                  }\n                }}\n                className=\"btn-primary\"\n              >\n                Publier\n              </button>\n            )}\n          </div>\n        ) : (\n          <>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8\">\n              {paginatedAnnouncements.map((a) => (\n                <div key={a.id} className=\"bg-white rounded-lg shadow-md overflow-hidden flex flex-col h-full\">\n                  {a.images && a.images.length > 0 ? (\n                    <img src={getImageUrl(a.images[0])} alt=\"annonce\" className=\"w-full h-40 object-cover\" />\n                  ) : (\n                    <div className=\"h-40 bg-gray-100 flex items-center justify-center text-gray-400\">\n                      <PhotoIcon className=\"w-12 h-12\" />\n                    </div>\n                  )}\n                  <div className=\"p-4 flex flex-col flex-grow\">\n                    <div className=\"flex-grow\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <div className=\"font-semibold text-gray-900 truncate\">\n                          {a.author ? `${a.author.firstName} ${a.author.lastName}` : 'Utilisateur inconnu'}\n                        </div>\n                        <div className=\"text-xs text-gray-500\">\n                          {formatDistanceToNow(new Date(a.createdAt), { addSuffix: true, locale: fr })}\n                        </div>\n                      </div>\n                      <p className=\"text-sm text-gray-700 line-clamp-3 mb-3\">{a.content}</p>\n                    </div>\n                    <div className=\"flex items-center justify-between mt-4 pt-3 border-t border-gray-100\">\n                      <div className=\"flex gap-2 flex-1\">\n                        <Link \n                          to={`/announcements/${a.id}`}\n                          className=\"btn-secondary flex-1 text-center\"\n                        >\n                          Voir détails\n                        </Link>\n                        {/* Bouton Modifier si l'utilisateur est l'auteur */}\n                        {user && Number(a.author?.id) === Number(user.id) && (\n                          <button\n                            onClick={() => navigate(`/edit-announcement/${a.id}`)}\n                            className=\"btn-primary flex items-center justify-center space-x-2 flex-1\"\n                            title=\"Modifier mon annonce\"\n                          >\n                            <span>Modifier</span>\n                          </button>\n                        )}\n                        {/* Bouton Contacter si l'utilisateur n'est pas l'auteur */}\n                        {user && Number(a.author?.id) !== Number(user.id) && (\n                          <button\n                            onClick={(e) => openContactFormForAnnouncement(e, a)}\n                            className=\"btn-primary flex items-center justify-center space-x-2 flex-1\"\n                          >\n                            <ChatIcon className=\"w-4 h-4\" />\n                            <span>Contacter</span>\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Pagination */}\n            {totalPages > 1 && (\n              <div className=\"flex justify-center items-center space-x-4 mt-8\">\n                <button\n                  onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))}\n                  disabled={currentPage === 1}\n                  className=\"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50\"\n                >\n                  Précédent\n                </button>\n                \n                <span className=\"text-gray-600\">\n                  Page {currentPage} sur {totalPages}\n                </span>\n                \n                <button\n                  onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))}\n                  disabled={currentPage === totalPages}\n                  className=\"px-4 py-2 border border-gray-300 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50\"\n                >\n                  Suivant\n                </button>\n              </div>\n            )} \n          </>\n        )}          \n    </div>\n  </div>\n)}\n\nexport default AnnouncementsPage;\n","import * as React from \"react\";\nfunction PlusIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 4.5v15m7.5-7.5h-15\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PlusIcon);\nexport default ForwardRef;"],"names":["useCINVerification","user","useAuth","navigate","useNavigate","showVerificationModal","setShowVerificationModal","useState","isVerified","cinVerified","cin_verified","isPending","cinPending","cin_verification_requested_at","requiresVerification","userType","checkVerification","useCallback","e","preventDefault","state","from","window","location","pathname","onClickHandler","path","PhotoIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","IdentificationIcon","isOpen","onClose","showBackButton","backButtonText","onBackClick","_jsx","className","children","_jsxs","onClick","handleClose","XMarkIcon","Link","to","type","handleBack","MagnifyingGlassIcon","AnnouncementsPage","announcements","loading","useAnnouncement","sendMessage","useMessage","searchQuery","setSearchQuery","currentPage","setCurrentPage","showContactForm","setShowContactForm","contactMessage","setContactMessage","selectedAnnouncement","setSelectedAnnouncement","filteredAnnouncements","useMemo","filter","announcement","_announcement$content","_announcement$author","_announcement$author$","_announcement$author2","_announcement$author3","content","toLowerCase","includes","author","firstName","lastName","paginatedAnnouncements","startIndex","slice","totalPages","Math","ceil","length","CINVerificationModal","placeholder","value","onChange","target","PlusIcon","_Fragment","map","a","_a$author","_a$author2","imageUrl","images","src","startsWith","concat","alt","formatDistanceToNow","Date","createdAt","addSuffix","locale","fr","Number","openContactFormForAnnouncement","_announcement$author4","_announcement$author5","ChatIcon","prev","max","disabled","min"],"sourceRoot":""}