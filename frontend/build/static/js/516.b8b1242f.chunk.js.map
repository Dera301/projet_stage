{"version":3,"file":"static/js/516.b8b1242f.chunk.js","mappings":"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","sources":["../node_modules/@heroicons/react/24/outline/esm/IdentificationIcon.js","../node_modules/@heroicons/react/24/outline/esm/ClockIcon.js","../node_modules/@heroicons/react/24/outline/esm/XMarkIcon.js","components/CINVerificationBanner.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction IdentificationIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(IdentificationIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ClockIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ClockIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 18 18 6M6 6l12 12\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XMarkIcon);\nexport default ForwardRef;","// CINVerificationBanner.tsx - version persistante\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { IdentificationIcon, XMarkIcon, ClockIcon } from '@heroicons/react/24/outline';\n\nconst CINVerificationBanner: React.FC = () => {\n  const { user } = useAuth();\n  const [isVisible, setIsVisible] = React.useState(true);\n\n  // Déterminer si l'utilisateur est vérifié (serveur)\n  const isUserVerified = React.useMemo(() => {\n    if (!user) return false;\n    // Considère l'utilisateur vérifié si le compte est vérifié OU la CIN est vérifiée\n    return Boolean(user.isVerified) || Boolean((user as any).is_verified) || Boolean(user.cinVerified) || Boolean((user as any).cin_verified);\n  }, [user]);\n\n  // Vérification en attente\n  const isVerificationPending = React.useMemo(() => {\n    if (!user || isUserVerified) return false;\n    \n    // Vérifier si une demande de vérification est en attente\n    const hasPendingRequest = \n      Boolean((user as any).cinPending) || \n      Boolean((user as any).cin_verification_requested_at) ||\n      (user as any).cin_verification_status === 'pending' ||\n      (user as any).status === 'PENDING_VERIFICATION';\n      \n    console.log('Vérification CIN - État:', {\n      user,\n      isUserVerified,\n      cinPending: (user as any).cinPending,\n      cin_verification_requested_at: (user as any).cin_verification_requested_at,\n      cin_verification_status: (user as any).cin_verification_status,\n      isVerificationPending: hasPendingRequest\n    });\n      \n    return hasPendingRequest;\n  }, [user, isUserVerified]);\n\n  // Charger la visibilité depuis localStorage et nettoyer si vérifié\n  React.useEffect(() => {\n    if (!user) return;\n    const key = `banner_hidden_${user.id}`;\n    const hidden = localStorage.getItem(key);\n    if (isUserVerified) {\n      // Si l'utilisateur est vérifié côté serveur, on force l'affichage à false\n      // et on nettoie le cache local pour ne pas influencer d'autres sessions\n      localStorage.removeItem(key);\n      setIsVisible(false);\n      return;\n    }\n    if (hidden === 'true') setIsVisible(false);\n  }, [user, isUserVerified]);\n\n  // Fonction de fermeture persistante\n  const handleClose = () => {\n    if (user) {\n      localStorage.setItem(`banner_hidden_${user.id}`, 'true');\n    }\n    setIsVisible(false);\n  };\n\n  // Masquer si pas connecté, vérifié (serveur) ou invisible\n  if (!user || isUserVerified || !isVisible) {\n    return null;\n  }\n\n  // Banner \"en attente\"\n  if (isVerificationPending) {\n    return (\n      <div className=\"fixed top-16 left-0 right-0 z-40 bg-blue-50 border-l-4 border-blue-400 p-4 shadow-md\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center\">\n            <ClockIcon className=\"h-5 w-5 text-blue-400\" />\n            <p className=\"ml-3 text-sm text-blue-700\">\n              <strong>Vérification en cours :</strong> Votre demande est en attente de validation. Si la demande est envoyée, vous serez notifié par email.\n              {' '}\n              <Link to=\"/profile\" className=\"font-medium underline text-blue-700 hover:text-blue-600\">\n                Voir mon profil →\n              </Link>\n            </p>\n          </div>\n          <button onClick={handleClose} className=\"ml-auto pl-3\">\n            <XMarkIcon className=\"h-5 w-5 text-blue-400 hover:text-blue-600\" />\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Banner \"vérification requise\"\n  return (\n    <div className=\"fixed top-16 left-0 right-0 z-40 bg-yellow-50 border-l-4 border-yellow-400 p-4 shadow-md\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center\">\n          <IdentificationIcon className=\"h-5 w-5 text-yellow-400\" />\n          <p className=\"ml-3 text-sm text-yellow-700\">\n            <strong>Vérification requise :</strong> Veuillez vérifier votre carte d’identité.\n            {' '}\n            <Link to=\"/cin-verification\" className=\"font-medium underline text-yellow-700 hover:text-yellow-600\">\n              Vérifier maintenant →\n            </Link>\n          </p>\n        </div>\n        <button onClick={handleClose} className=\"ml-auto pl-3\">\n          <XMarkIcon className=\"h-5 w-5 text-yellow-400 hover:text-yellow-600\" />\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CINVerificationBanner;\n"],"names":["IdentificationIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","ClockIcon","XMarkIcon","CINVerificationBanner","user","useAuth","isVisible","setIsVisible","isUserVerified","Boolean","isVerified","is_verified","cinVerified","cin_verified","isVerificationPending","hasPendingRequest","cinPending","cin_verification_requested_at","cin_verification_status","status","console","log","key","concat","hidden","localStorage","getItem","removeItem","handleClose","setItem","_jsx","className","children","_jsxs","Link","to","onClick"],"sourceRoot":""}